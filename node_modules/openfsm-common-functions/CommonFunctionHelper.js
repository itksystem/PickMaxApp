const common = require("openfsm-common"); // Библиотека с общими параметрами
const logger = require("./../../controllers/LoggerHandler"); // Работа с лог-файлами

class CommonFunctionHelper {
  constructor() {}

  /**
   * Возвращает токен из запроса из headers или cookies
   * @param {Object} request - Данные запроса
   * @returns {string} - JWT токен
   */
  getJwtToken(req) {
    return (
      (req.headers["authorization"] &&
        req.headers["authorization"].split(" ")[1]) ||
      (req.cookies && req.cookies.accessToken)
    );
  }

  getDescriptionByCode(code) {
    try {
      for (const key in common.HTTP_CODES) {
        if (common.HTTP_CODES[key].code === Number(code)) {
          return common.HTTP_CODES[key].description;
        }
      }
    } catch (error) {
      logger.error(`Ошибка в getDescriptionByCode: ${error.message}`);
    }
    return "Неизвестная ошибка";
  }
}



module.exports = CommonFunctionHelper

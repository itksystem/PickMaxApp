!function(e){var t="object"==typeof exports&&exports,n="object"==typeof module&&module&&module.exports==t&&module,o="object"==typeof global&&global;o.global!==o&&o.window!==o||(e=o);var a=function(e){this.message=e};a.prototype=new Error,a.prototype.name="InvalidCharacterError";var r=function(e){throw new a(e)},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/<%= spaceCharacters %>/g,l=function(e){e=String(e).replace(s,"");var t=e.length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&r("Invalid character: the string to be decoded is not correctly encoded.");for(var n,o,a=0,l="",d=-1;++d<t;)o=i.indexOf(e.charAt(d)),n=a%4?64*n+o:o,a++%4&&(l+=String.fromCharCode(255&n>>(-2*a&6)));return l},d=function(e){e=String(e),/[^\0-\xFF]/.test(e)&&r("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,o,a,s=e.length%3,l="",d=-1,u=e.length-s;++d<u;)t=e.charCodeAt(d)<<16,n=e.charCodeAt(++d)<<8,o=e.charCodeAt(++d),a=t+n+o,l+=i.charAt(a>>18&63)+i.charAt(a>>12&63)+i.charAt(a>>6&63)+i.charAt(63&a);return 2==s?(t=e.charCodeAt(d)<<8,n=e.charCodeAt(++d),a=t+n,l+=i.charAt(a>>10)+i.charAt(a>>4&63)+i.charAt(a<<2&63)+"="):1==s&&(a=e.charCodeAt(d),l+=i.charAt(a>>2)+i.charAt(a<<4&63)+"=="),l},u={encode:d,decode:l,version:"<%= version %>"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return u});else if(t&&!t.nodeType)if(n)n.exports=u;else for(var c in u)u.hasOwnProperty(c)&&(t[c]=u[c]);else e.base64=u}(this);var $ph=function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)});var e={"й":"q","ц":"w","у":"e","к":"r","е":"t","н":"y","г":"u","ш":"i","щ":"o","з":"p","ф":"a","ы":"s","в":"d","а":"f","п":"g","р":"h","о":"j","л":"k","д":"l","я":"z","ч":"x","с":"c","м":"v","и":"b","т":"n","ь":"m"},t=[8,9,13,16,17,18,20,27,32,37,38,39,40,46],n=function(t){return e[t]?e[t]:t},o=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};return{regexp:{isNumber:function(e){return/[0-9]/.test(e)}},isIgnoredCharCode:function(e){return t.includes?t.includes(e):t.indexOf(e)>-1},extend:function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n&&void 0!==n)for(var a in n)if(void 0!==n.hasOwnProperty&&n.hasOwnProperty(a))if(null!==n[a]&&"object"==typeof n[a]){if(o(n[a])){e[a]=n[a];continue}n[a]instanceof Array?e[a]=n[a].slice(0):e[a]=$ph.extend(e[a],n[a])}else e[a]=n[a]}return e},ajax:function(e,t){var n=new XMLHttpRequest;if(n.open(e.type,e.url,!0),e.headers)for(key in e.headers)n.setRequestHeader(key,e.headers[key]);else n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");n.timeout=e.timeout,n.onload=function(){if(n.status>=200&&n.status<400){var o;try{o=t?n.responseXML:JSON.parse(n.responseText)}catch(e){o=n.responseText}e.success(o)}else e.error(n)},n.onerror=e.error,n.ontimeout=e.error,n.send(e.data)},ready:function(e){"complete"===document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&e()})},addEvent:function(e,t,n){if(!t)return!1;var o=e.split(" "),a=t.length>0&&"select-one"!==t.type?t:[t];"payForm"===t.id&&(a=[t]),a.forEach(function(e){o.forEach(function(t){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n})})},removeEvent:function(e,t,n){var o=e.split(" ");(t.length>0?t:[t]).forEach(function(e){o.forEach(function(t){e.removeEventListener(t,n)})})},clearEventListener:function(e){if(!e)return!1;var t=e.cloneNode(!0);return e.replaceWith(t),t},removeClass:function(e,t){if(!e)return!1;"function"==typeof e&&(e=e()),e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:function(e,t){return!!e&&("function"==typeof e&&(e=e()),e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className))},addClass:function(e,t){if(!e)return!1;if("function"==typeof e&&(e=e()),e.classList)e.classList.add(t);else{for(var n=e.className,o=!1,a=n.split(" "),r=0;a.length,!o;r++)o=a[r]===t;o||(""===n?e.className=t:e.className+=" "+t)}},translateRuToEn:function(e){return e.split("").map(function(e){return n(e)}).join("")},trigger:function(e,t){if(!e)return!1;var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent?e.dispatchEvent(n):e.fireEvent(n)},getQuery:function(e){var t=[];for(key in e)t.push(encodeURIComponent(key)+"="+encodeURIComponent(e[key]));return t.join("&")},setVisibility:function(e,t,n){if(!e)return!1;if("object"==typeof t&&t.hasOwnProperty("key")&&t.hasOwnProperty("value")){var o=JSON.parse(JSON.stringify(t));t=o.key,n=o.value}n||(n="block"),e.length>1&&"FORM"!==e.tagName?e.forEach(function(e){$ph.setVisibility(e,t,n)}):t&&"reset"===t?"function"==typeof e&&e()?e().style.display="":"object"==typeof e&&e&&(e.style.display=""):"function"==typeof e&&e()?e().style.display=t?n:"none":"object"==typeof e&&e&&(e.style.display=t?n:"none")},setDisable:function(e,t){"function"==typeof e&&(e=e()),e&&(e.disabled=t)},getDelimitedParams:function(e,t){var n="";for(key in e)null!==e[key]&&"object"==typeof e[key]?n+=key+"="+JSON.stringify(e[key])+";":n+=key+"="+e[key]+";";return n},hashCode:function(e){var t,n,o=0;if(0===e.length)return o;for(t=0;t<e.length;t++)n=e.charCodeAt(t),o=(o<<5)-o+n,o|=0;return o},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},deepExtend:function(e){e=e||{};for(var t=1,n=arguments.length;t<n;++t){var o=arguments[t];if(o)for(var a in o)o.hasOwnProperty(a)&&("[object Object]"!==Object.prototype.toString.call(o[a])?e[a]=o[a]:e[a]=$ph.deepExtend(e[a],o[a]))}return e},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})},plural:function(e,t,n,o){var a=Math.abs(e);return(a%=100)>=5&&a<=20?o:(a%=10,1===a?t:a>=2&&a<=4?n:o)}}}(),Payture=function(){var _model=function(){var e=null,t=function(){return{Type:"JSON",Language:"RU",PayMethod:"inpay",PaymentType:"init",IsAnyAdditionalPayMethodAvailable:!1,Platform:navigator.platform,QueryParams:{},CardHolder:"Payture",SMSDelay:6e4,IsForcedHidden:!0,VTBMultiBonusUsing:!1,UsingFormValues:{Key:!0,CardNumber:!0,EMonth:!0,EYear:!0,EDate:!1,CardHolder:!0,SecureCode:!0,EChequeCustomerContact:!0,ExternalWallet:!1,PayWithHalva:!1},PreAuthFormValues:{CardNumber:!0,EMonth:!0,EYear:!0,BrowserData:!0,Key:!0},Data:{Key:document.getElementsByName("Key")[0],CardNumber:document.getElementsByName("CardNumber")[0],EMonth:document.getElementsByName("EMonth")[0],EYear:document.getElementsByName("EYear")[0],EDate:document.getElementsByName("DateTo")[0],CardHolder:document.getElementsByName("CardHolder")[0],SecureCode:document.getElementsByName("SecureCode")[0],EChequeCustomerContact:document.getElementsByName("EChequeCustomerContact")[0]},Elements:{ExpiryField:document.getElementsByClassName("expiry")[0],CVCField:document.querySelectorAll("#card-one .cvc")[0],PANField:document.querySelectorAll("#card-one .onlyCardNum")[0],PayButton:document.getElementsByName("Pay")[0],CancelButton:function(){return document.getElementsByName("Cancel")[0]},CardForm:document.getElementById("payForm"),CardBlock:document.getElementById("card-block"),AddCardElement:document.getElementsByClassName("addCard")[0],MPAddCardContainer:document.getElementById("mp-add-card-container"),SelectCardElement:document.getElementById("selectCard"),ErrorField:document.getElementById("errorTop"),PayForm:document.getElementById("form"),SMSVerificationBlock:function(){return document.getElementById("uz-sms-verification")},SMSVerificationInput:function(){return document.getElementById("uz-pares")},SMSVerificationButton:function(){return document.querySelector("#uz-sms-verification button")},SMSVerificationResendLink:function(){return document.querySelector("#uz-sms-verification a")},SMSVerificationResendWaiting:function(){return document.querySelector("#uz-sms-verification span")},ResultBlock:document.getElementById("result"),ResultBlockHeader:document.querySelectorAll("#result h3")[0],ResultBlockMessage:document.querySelectorAll("#result .message")[0],ResultBlockReturnMessage:document.getElementById("return-description"),EMailBlock:document.getElementById("email"),CardOneBlock:document.getElementById("card-one"),MobileCommerceBlock:document.getElementById("mobile-commerce"),TerminalPayBlock:document.getElementById("terminal-pay"),MultibonusPayBlock:document.getElementById("multibonus-pay"),SBPPayBlock:document.getElementById("sbp-pay"),CaptionPayMethodsBlock:document.getElementsByClassName("caption")[0],PayMethodsBlocks:document.getElementById("payment-methods"),PayTypeButtons:document.getElementsByClassName("ico"),PaytureConditions:document.getElementById("payture-conditions"),EmailVisibility:document.getElementById("email-visibility"),EmailVisibilityCheckbox:document.querySelector("#email-visibility input"),ProductName:document.getElementsByName("Product")[0],OrderId:document.getElementsByName("OrderId")[0],Amount:document.getElementsByName("Amount")[0],ProductDescription:document.getElementsByName("ProductDescription")[0],PayWithHalvaMark:function(){return document.getElementById("PayWithHalva")},PayWithHalva:function(){return document.getElementById("paywithhalva-container")},CardHolderBlock:document.getElementsByClassName("holder")[0],LogoVisibility:function(){return document.querySelector("header .header__logo")},FootnoteVisibility:document.querySelector(".footnote:not(.offer)"),ProviderName:document.querySelector(".provider-name"),ProviderDescription:document.querySelector(".provider-description"),BonusAmountContainer:function(){return document.querySelector(".vtb-bonus-amount-container")},BonusAmountInput:function(){return document.querySelector("[name=BonusAmount]")},VTBMaxBonusAmountValue:function(){return document.querySelector("#VTBMaxBonusAmountValue")},ReturnButton:function(){return document.querySelector(".return-control button")},ReturnForm:function(){return document.querySelector(".return-control form")},PaymentTypeHeaderIcon:function(){return document.querySelector(".header__payment-type-logo")},PaymentTypeCaption:function(){return document.querySelector(".payment-type-caption")},CardPayMethodButtonContainer:function(){return document.querySelector(".card-section-container")},CardPayMethodButton:function(){return document.querySelector(".card-pay.ico")},CardCheckboxesContainer:function(){return document.querySelector(".card-checkboxes")},LifeTimer:function(){return document.querySelector(".life-timer")}},FormValues:{Key:"",CardNumber:"",EMonth:"",EYear:"",EDate:"",CardHolder:"",SecureCode:"",EChequeCustomerContact:"",ExternalWallet:"",PayWithHalva:!0},VisibilitySettings:{CVCField:!0,ExpiryField:!0,PayButton:!0,CardOneBlock:!0,MobileCommerceBlock:!1,TerminalPayBlock:!1,CardForm:!0,SBPPayBlock:!1,SberPayBlock:!1,TinkoffPayBlock:!1,MultibonusPayBlock:!1,AddCardElement:!0,MPAddCardContainer:!1,CaptionPayMethodsBlock:!0,PayMethodsBlocks:!0,EMailBlock:!1,SelectCardElement:!1,PayForm:!0,ResultBlock:!1,PaytureConditions:!0,BackButton:!1,PayWithHalva:!1,CardHolderBlock:!1,SMSVerificationBlock:!1,SMSVerificationResendLink:!1,SMSVerificationResendWaiting:!1,LogoVisibility:{key:!0,value:"flex"},FootnoteVisibility:!0,ProviderName:!0,ProviderDescription:!0,BonusAmountContainer:!1,ReturnButton:!0,CardPayMethodButtonContainer:!1,CardCheckboxesContainer:!1,EmailVisibility:!1},DisableSettings:{CardNumber:!1,EDate:!1,SecureCode:!1,CardHolder:!1,PayButton:!0,SMSVerificationButton:!0,VTBBonusAccess:!1},InnerHTML:{ResultBlockHeader:"",ResultBlockMessage:"",ResultBlockReturnMessage:""},LoadingButtons:{PayButton:!1,SMSVerificationButton:!1},PageSettings:{CurrentErrors:[],GoMainCallback:null,GoMain:!1,RedirectUrl:null,CardBackgroundColor:"",CardFontLabelColor:"",CardFontMainColor:"",CardLogo:"none",CardNumberPSIconVisibilityClass:!0},Constants:{RedirectTimeout:2e3},ElementsToRedefine:{MPOTPTimer:{source:"Elements",selectorType:"id",selector:"mp-timer"}},TemplateErrors:templateErrors,PayByCardButton:!1,TemplateText:templateText,ResponseText:answers,ServerErrors:errors,ServerErrorsMobileCommerce:$ph.deepExtend({},errors,{RU:{AMOUNT_EXCEED:"Сумма транзакции превышает доступный остаток средств на выбранном счете",ISSUER_LIMIT_FAIL:"Превышение лимитов оператора",ISSUER_FAIL:"Оператор не разрешил списание средств",PROCESSING_TIME_OUT:"Не получен ответ от оператора в установленное время",CANCELED_BY_USER:"Операция отменена клиентом",WRONG_PARAMS:"Неверный номер счёта/суммы платежа",PROCESSING_ERROR:"Отказ, обратитесь к оператору",ORDER_TIME_OUT:"Истекло время ожидания подтверждения платежа",PREVIOUS_PAYMENT_NOT_COMPLETED:"Предыдущий платеж еще не завершен",WRONG_PHONE:"Не найден оператор для этого номера",ISSUER_TIMEOUT:"Не получен ответ от оператора"},EN:{AMOUNT_EXCEED:"The transaction amount exceeds the available balance on the selected account",ISSUER_LIMIT_FAIL:"The limits of the operator",ISSUER_FAIL:"The operator did not allow the write-off",PROCESSING_TIME_OUT:"No response was received from the operator at the set time",CANCELED_BY_USER:"Operation canceled by client",WRONG_PARAMS:"Incorrect account number / payment amount",PROCESSING_ERROR:"Please contact your operator",ORDER_TIME_OUT:"Payment confirmation waiting time has expired",PREVIOUS_PAYMENT_NOT_COMPLETED:"The previous payment has not been completed yet",WRONG_PHONE:"No operator found for this number",ISSUER_TIMEOUT:"No response is received from the operator"}}),CheckCardData:!0,CheckNumbers:!0,CheckLetters:!0,DisableButton:!0,CheckLuna:!0,Fingerprint:!1,CheckBins:!1,VTBMultiBonus:!1,Iframe3DSReady:!1,Comission:{mts:1,beeline:2,megafon:3,yota:4,tele2:5},FPSettings:{fingerprint:{},isFingerprintSended:!1,TimeFirstClick:0,TimeSubmitStart:0,TimeInit:0,TotalDistance:0,TimeMouseFirstClick:0},HelpVariables:{tempCardNumber:""}}},n=function(){var t=Payment.getCardArray();e.options.CheckLuna||(t=t.map(function(e){return e.luhn=!1,e}),Payment.setCardArray(t))},o=function(){"use strict";var e,t;e="Error",t=null;try{return t=navigator.javaEnabled()?"true":"false",t}catch(t){return e}},a=function(){var t={BrowserData:""},n=new Fingerprint2;$ph.extend(e.options.FormValues,t),n.get(function(t,n){if(void 0!==window.console){for(var a={channel:"Browser"},r=0;r<n.length;r++)switch(n[r].key){case"color_depth":a.colorDepth=n[r].value;break;case"language":"ru-RU"===n[r].value?a.lang="RU":a.lang="EN";break;case"resolution":a.screenHeight=n[r].value[1],a.screenWidth=n[r].value[0];break;case"timezone_offset":a.timezone=n[r].value;break;case"user_agent":a.userAgent=n[r].value}a.windowHeight=Math.max(document.documentElement.clientHeight||123,window.innerHeight||123),a.windowWidth=Math.max(document.documentElement.clientWidth||123,window.innerWidth||123),a.javaEnabled=o();var i="";i=window.btoa?window.btoa(JSON.stringify(a)):base64.encode(JSON.stringify(a)),e.setOption("FormValues.BrowserData",i),e.setOption("UsingFormValues.BrowserData",!0)}})},r=function(){if(e.options.Fingerprint){var t={PaytureId:document.getElementsByName("PaytureId")[0]},n={PaytureId:""},o=new Fingerprint2;$ph.extend(e.options.Data,t),$ph.extend(e.options.FormValues,n),o.get(function(t,n){void 0!==window.console&&n.push({key:"fingerprint",value:t}),e.options.FPSettings.fingerprint=n})}},i=function(){var t={},n=e.options.FPSettings;return n.TimeSubmitStart=(new Date).getTime()-n.TimeInit,void 0!==window.console&&(n.fingerprint.push({key:"first_keypress_timespan",value:n.TimeFirstClick},{key:"total_activity_timespan",value:n.TimeSubmitStart},{key:"mouse_total_distance",value:Math.round(n.TotalDistance)},{key:"mouse_first_click_timespan",value:n.TimeMouseFirstClick}),n.fingerprint.forEach(function(e){t[e.key]=e.value})),JSON.stringify(t)},s=function(t,n){var o=document.createElement("div");o.setAttribute("id","uz-sms-verification"),o.setAttribute("class","");var a=document.getElementById("payForm");if(a){a.parentNode.insertBefore(o,a);var r=document.createElement("form");r.setAttribute("name","form"),r.setAttribute("action",t),r.setAttribute("method","post");var i=document.createElement("input");i.setAttribute("name","MD"),i.setAttribute("type","hidden"),i.setAttribute("value",n);var s=document.createElement("div");s.setAttribute("class","ic top-r bottom-r"),s.setAttribute("style","border: 1px solid #d9d9d9;background-color: #fff;padding: 0 15px;border-radius: 8px;");var l=document.createElement("input");l.setAttribute("name","PaRes"),l.setAttribute("id","uz-pares"),l.setAttribute("type","tel"),l.setAttribute("class","middle"),l.setAttribute("maxlength","6"),l.setAttribute("placeholder","Введите код из СМС");var d=document.createElement("button");d.setAttribute("type","submit"),d.setAttribute("class","button"),d.setAttribute("style","margin-top: 10px;"),d.innerHTML="Отправить";var u=document.createElement("a");u.setAttribute("style","display: block;text-align: center;margin-top: 10px;cursor: pointer;"),u.innerHTML="Отправить еще раз";var c=document.createElement("span");c.setAttribute("style","display: block;text-align: center;margin-top: 10px;"),c.innerHTML=e.options.TemplateText[e.options.Language].SMSDelay,r.appendChild(i),r.appendChild(s),s.appendChild(l),r.appendChild(d),o.appendChild(r),o.appendChild(u),o.appendChild(c)}},l=function(t,n){e.setOption("VisibilitySettings.CardForm",!1),e.setOption("VisibilitySettings.SMSVerificationBlock",!0),s(t,n),e.setOption("VisibilitySettings.SMSVerificationResendLink",!1),e.setOption("DisableSettings.SMSVerificationButton",!0),d(),$ph.addEvent("click",e.options.Elements.SMSVerificationResendLink(),function(t){e.resendUzSMS()}),$ph.addEvent("click",e.options.Elements.SMSVerificationButton(),function(t){e.setOption("LoadingButtons.SMSVerificationButton",!0)}),$ph.addEvent("input",e.options.Elements.SMSVerificationInput(),function(t){setTimeout(function(){t.target.value&&String(t.target.value).replace(/ /g,"").length>5?e.setOption("DisableSettings.SMSVerificationButton",!1):e.setOption("DisableSettings.SMSVerificationButton",!0)},100)})},d=function(){e.options.Elements.SMSVerificationInput().value="",e.setOption("VisibilitySettings.SMSVerificationResendWaiting",!0);var t=e.options.SMSDelay,n=e.options.Elements.SMSVerificationResendWaiting(),o=setInterval(function(){t-=1e3;var a=Math.floor(t/1e3%60),r=Math.floor(t/6e4%60),i="";r>0?(a<10&&(a="0"+a.toString()),i=r+":"+a):i=""+a,n.innerHTML=e.options.TemplateText[e.options.Language].SMSDelay+i,t<=0&&(clearInterval(o),n.innerHTML="",e.setOption("VisibilitySettings.SMSVerificationResendWaiting",!1),e.setOption("VisibilitySettings.SMSVerificationResendLink",!0))},1e3)},u=function(e,t,n,o){var a=document.createElement("form");a.setAttribute("name","form"),a.setAttribute("action",e),a.setAttribute("method","post");var r=document.createElement("input");r.setAttribute("name","TermUrl"),r.setAttribute("type","hidden"),r.setAttribute("value",t);var i=document.createElement("input");i.setAttribute("name","MD"),i.setAttribute("type","hidden"),i.setAttribute("value",n);var s=document.createElement("input");s.setAttribute("name","PaReq"),s.setAttribute("type","hidden"),s.setAttribute("value",o),a.appendChild(r),a.appendChild(i),a.appendChild(s),document.body.appendChild(a),a.submit()},c=function(e,t,n){var o=document.createElement("form");o.setAttribute("name","form"),o.setAttribute("action",e),o.setAttribute("method","post");var a=document.createElement("input");a.setAttribute("name","threeDSSessionData"),a.setAttribute("type","hidden"),a.setAttribute("value",t);var r=document.createElement("input");r.setAttribute("name","creq"),r.setAttribute("type","hidden"),r.setAttribute("value",n),o.appendChild(a),o.appendChild(r),document.body.appendChild(o),o.submit()},m=function(e){var t=document.createElement("iframe");t.setAttribute("id","iframe-enabled"),t.setAttribute("name","iframe-enabled"),t.style.visibility="hidden",t.style.height="0px";var n=document.createElement("form");n.setAttribute("name","form-iframe-enabled"),n.setAttribute("target","iframe-enabled"),n.setAttribute("action","/tds/iframeenabled"),n.setAttribute("method","post");var o=document.createElement("input");o.setAttribute("name","threeDSMethodData"),o.setAttribute("type","hidden"),o.setAttribute("value",e),n.appendChild(o),document.body.appendChild(n),document.body.appendChild(t),n.submit()},p=function(t,n,o,a){function r(t){"THREE_DS_METHOD_COMPLETED"===t.data&&(e.options.Iframe3DSReady||(e.setOption("Iframe3DSReady",!0),window.removeEventListener("message",r,!1),a?a():e[e.options.PayMethod]()))}var i=document.createElement("iframe");i.setAttribute("id","iframe-3ds2"),i.setAttribute("name","iframe-3ds2"),i.style.visibility="hidden",i.style.height="0px";var s=document.createElement("form");s.setAttribute("name","form"),s.setAttribute("target","iframe-3ds2"),s.setAttribute("action",n),s.setAttribute("method","post");var l={threeDSServerTransID:t,threeDSMethodNotificationURL:o},d="";d=window.btoa?window.btoa(JSON.stringify(l)):base64.encode(JSON.stringify(l)),m(d);var u=document.createElement("input");u.setAttribute("name","threeDSMethodData"),u.setAttribute("type","hidden"),u.setAttribute("value",d),s.appendChild(u),document.body.appendChild(s),document.body.appendChild(i),window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent("onmessage",r,!1),setTimeout(function(){e.options.Iframe3DSReady||(e.setOption("Iframe3DSReady",!0),window.removeEventListener("message",r,!1),a?a():e[e.options.PayMethod]())},1e4),s.submit()},y=function(e,t){var n=document.createElement("iframe");n.setAttribute("id","iframe-3ds2-acs"),n.setAttribute("name","iframe-3ds2-acs"),n.style="visibility:hidden;height:0;";var o=document.createElement("form");o.setAttribute("name","form"),o.setAttribute("target","iframe-3ds2-acs"),o.setAttribute("action",e),o.setAttribute("method","post");var a=document.createElement("input");a.setAttribute("name","threeDSMethodData"),a.setAttribute("type","hidden"),a.setAttribute("value",t),o.appendChild(a),document.body.appendChild(o),document.body.appendChild(n),o.submit()},E=function(){for(var t={},n=window.location.search.substring(1),o=n.split("&"),a=0;a<o.length;a++){var r=o[a].split("=");if(void 0===t[r[0]])t[r[0]]=decodeURIComponent(r[1]);else if("string"==typeof t[r[0]]){var i=[t[r[0]],decodeURIComponent(r[1])];t[r[0]]=i}else t[r[0]].push(decodeURIComponent(r[1]))}e.setOption("QueryParams",t)};return{options:{},listeners:{},init:function(o){e=this,e.options=e.createOptions({},t(),o),e.options.use_3ds2&&a(),n(),r(),E()},initLight:function(n){e=this,e.options=e.createOptions({},t(),n)},createOptions:function(e,t,n){return $ph.extend(e,t,n)},resendUzSMS:function(){e.setOption("VisibilitySettings.SMSVerificationResendLink",!1),$ph.ajax({url:"/apim/ResendCode/",data:"Key="+encodeURIComponent(e.options.FormValues.Key)+"&OrderId="+e.options.Elements.OrderId.value,type:"POST",timeout:6e4,success:function(e){d()},error:function(){d()}})},sendFingerPrint:function(){e.options.FPSettings.isFingerprintSended=!0,$ph.ajax({url:"/tapi/SaveUserInfo/",data:"data="+i(),type:"POST",timeout:6e4,success:function(t){t.Id>0&&e.setOption("FormValues.PaytureId",t.Id)},error:function(){}})},setOption:function(t,n){var o=e.options,a=t.split(".").slice(-1)[0];t.split(".").slice(0,-1).forEach(function(e){o=o[e]});var r=o[a];o[a]=n;var i=e.listeners[t];i&&i.forEach(function(e){e.listener(a,n,r,e.additionalParams)})},addListener:function(t,n,o){e.listeners[t]||(e.listeners[t]=[]),e.listeners[t].push({listener:n,additionalParams:o})},getFormValues:function(){var t=[],n=e.options.FormValues;usingValues=e.options.UsingFormValues;for(key in n)usingValues[key]&&t.push(key+"="+("Key"===key?encodeURIComponent(n[key]):n[key]));return e.options.VTBMultiBonus&&e.options.VTBMultiBonusUsing&&t.push("BonusAmount="+100*e.options.Elements.BonusAmountInput().value),t.join(";")},getPreAuthFormValues:function(t){var n=[],o=e.options.FormValues,a=e.options.PreAuthFormValues;for(var r in o)a[r]&&n.push(("CardNumber"===r?"PAN":r)+"="+o[r]);if(t&&t.length>0)for(var i=0;i<t.length;i++)switch(t[i]){case"PayToken":var s=e.options.PaymentData,l=s.paymentMethodData.tokenizationData.token,d=window.btoa?window.btoa(unescape(encodeURIComponent(l))):base64.encode(unescape(encodeURIComponent(l)));n.push("PayToken="+d);break;case"CVV":n.push("SecureCode="+e.options.FormValues.GoogleCvv)}return n.push("SessionId="+e.options.QueryParams.SessionId),n.push("Data="+encodeURIComponent(e.getFormValues())),n.join("&")},onSuccess:function(t,n){if(!e.options.use_3ds2_preauth&&e.options.use_3ds2&&t.ThreeDsMethodUrl&&t.ThreeDsServerTransId&&t.ThreeDsMethodNotificationUrl&&t.AuthId&&""!==t.ThreeDsMethodUrl&&""!==t.ThreeDsServerTransId&&""!==t.ThreeDsMethodNotificationUrl&&""!==t.AuthId)return e.payContinue(t,n),!0;e.onSuccessContinue(t,n)},onSuccessContinue:function(t,n){var o=e.options,a=o.Language;if(t.PaReq)return-1!==t.ThreeDSKey.indexOf("SMS_Verification")?l(t.TermUrl,t.ThreeDSKey):u(t.ACSUrl,t.TermUrl,t.ThreeDSKey,t.PaReq),!0;if(t.CReq)return c(t.ACSUrl,t.ThreeDSSessionData,t.CReq),!0;e.setOption("DisableSettings.PayButton",!1),e.setOption("LoadingButtons.PayButton",!1),e.setOption("InnerHTML.ResultBlockHeader",void 0!==n&&n?o.ResponseText[a].ADD_SUCCESS_TITLE:o.ResponseText[a].PAY_SUCCESS_TITLE),document.title=o.TemplateText[a].RETURN_TITLE_SUCCESS,e.setOption("InnerHTML.ResultBlockMessage",""),e.setOption("InnerHTML.ResultBlockReturnMessage",o.ResponseText[o.Language].REDIRECT_TEXT),o.Elements.MPContainerLogin&&e.setOption("VisibilitySettings.MPContainerLogin",!1),document.querySelectorAll(".return-icon svg").forEach(function(e){e.style.display="none"});var r=document.querySelector(".return-icon__"+(t.Success?"true":"false"));if(r&&(r.style.display="block"),o.Elements.ReturnButton()){o.Elements.ReturnButton().type="submit",$ph.addClass(o.Elements.ReturnButton(),"button__arrow"),$ph.removeClass(o.Elements.ReturnButton(),"button__cancel"),$ph.addClass(o.Elements.ReturnButton(),"button__arrow_"+(t.Success?"true":"false"));var i=o.Elements.ReturnButton().querySelector("span");i&&(i.innerHTML=o.TemplateText[a].ReturnShop)}e.setOption("VisibilitySettings.PayForm",!1),e.setOption("VisibilitySettings.ResultBlock",!0,"flex"),window.parent.postMessage(JSON.stringify({method:"Payture.PaymentSuccess"}),"*"),t.RedirectUrl&&e.setOption("PageSettings.RedirectUrl",t.RedirectUrl),o.Elements.ReturnForm()&&(o.Elements.ReturnForm().action=t.RedirectUrl)},onError:function(t,n){var o=e.options,a=o.Language,r=o.Elements.ErrorField;e.setOption("DisableSettings.PayButton",!1),e.setOption("LoadingButtons.PayButton",!1);var i="mobile_commerce"===o.PaymentType||"terminal_pay"===o.PaymentType?o.ServerErrorsMobileCommerce[o.Language][t.ErrCode]:o.ServerErrors[o.Language][t.ErrCode];if(void 0===i&&(i=void 0!==t.ErrCode?t.ErrCode:""),t.Key&&e.setNewKey(t.Key),t.CanRetry){var s=o.PageSettings.CurrentErrors.slice(),l={Key:"",Message:i};if(e.setOption("VisibilitySettings.PayForm",!0),s.push(l),e.setOption("PageSettings.CurrentErrors",s),o.PageSettings.CurrentErrors.length>0){var d=o.PageSettings.CurrentErrors.slice(-1)[0];r.innerHTML=d.Message}else r.innerHTML=""}else{o.Elements.MPContainerLogin&&e.setOption("VisibilitySettings.MPContainerLogin",!1),e.setOption("InnerHTML.ResultBlockHeader",void 0!==n&&n?o.ResponseText[a].ADD_ERROR_TITLE:o.ResponseText[a].PAY_ERROR_TITLE),e.setOption("InnerHTML.ResultBlockMessage",i),e.setOption("InnerHTML.ResultBlockReturnMessage",o.ResponseText[o.Language].REDIRECT_TEXT),document.title=o.TemplateText[a].RETURN_TITLE_ERROR;document.querySelectorAll(".return-icon svg").forEach(function(e){e.style.display="none"});var u=document.querySelector(".return-icon__"+(t.Success?"true":"false"));if(u&&(u.style.display="block"),o.Elements.ReturnButton()){o.Elements.ReturnButton().type="submit",$ph.addClass(o.Elements.ReturnButton(),"button__arrow"),$ph.removeClass(o.Elements.ReturnButton(),"button__cancel"),$ph.addClass(o.Elements.ReturnButton(),"button__arrow_"+(t.Success?"true":"false"));var c=o.Elements.ReturnButton().querySelector("span");c&&(c.innerHTML=o.TemplateText[a].ReturnShop)}e.setOption("VisibilitySettings.PayForm",!1),e.setOption("VisibilitySettings.ResultBlock",!0,"flex"),window.parent.postMessage(JSON.stringify({method:"Payture.PaymentFail",errCode:t.ErrCode,errText:i}),"*"),t.RedirectUrl&&e.setOption("PageSettings.RedirectUrl",t.RedirectUrl),o.Elements.ReturnForm()&&(o.Elements.ReturnForm().action=t.RedirectUrl)}},onWaitScreen:function(){var t=e.options,n=t.Language;document.querySelectorAll(".return-icon svg").forEach(function(e){e.style.display="none"});var o=document.querySelector(".return-icon__wait");if(o&&(o.style.display="block"),t.Elements.ReturnButton()){t.Elements.ReturnButton().type="button",$ph.removeClass(t.Elements.ReturnButton(),"button__arrow"),$ph.addClass(t.Elements.ReturnButton(),"button__cancel");var a=t.Elements.ReturnButton().querySelector("span");a&&(a.innerHTML=t.TemplateText[n].Cancel)}var r=document.querySelector(".amount").cloneNode(!0),i=document.querySelector(".good").cloneNode(!0);e.setOption("InnerHTML.ResultBlockHeader","Ожидаем оплату"),e.setOption("InnerHTML.ResultBlockMessage",'<div class="amount">'+r.innerHTML+"</div>"+i.outerHTML),e.setOption("InnerHTML.ResultBlockReturnMessage","Перейдите к оплате через СМС<br/>или пуш-уведомление в СберБанк Онлайн"),e.setOption("VisibilitySettings.PayForm",!1),e.setOption("VisibilitySettings.ResultBlock",!0,"flex")},onIntermediateError:function(t){var n=e.options,o=(n.Language,n.Elements.ErrorField);e.setOption("DisableSettings.PayButton",!1),e.setOption("LoadingButtons.PayButton",!1);var a="mobile_commerce"===n.PaymentType||"terminal_pay"===n.PaymentType?n.ServerErrorsMobileCommerce[n.Language][t.ErrCode]:n.ServerErrors[n.Language][t.ErrCode];void 0===a&&(a=void 0!==t.ErrCode?t.ErrCode:""),t.Key&&e.setNewKey(t.Key);var r=n.PageSettings.CurrentErrors.slice(),i={Key:"",Message:a};if(e.setOption("VisibilitySettings.PayForm",!0),r.push(i),e.setOption("PageSettings.CurrentErrors",r),n.PageSettings.CurrentErrors.length>0){var s=n.PageSettings.CurrentErrors.slice(-1)[0];o.innerHTML=s.Message}else o.innerHTML="";e.setOption("PaymentType","init")},setNewKey:function(t){e.setOption("FormValues.Key",t)},xmlToString:function(e){return window.ActiveXObject?e.xml:(new XMLSerializer).serializeToString(e)},getBankProfileByBIN:function(t){$ph.ajax({url:"/api/cardart",data:"bin="+t,type:"POST",timeout:6e4,success:function(t){t.Success?(e.setOption("PageSettings.CardBackgroundColor",t.BackgroundColor),e.setOption("PageSettings.CardFontLabelColor",t.FontLabelColor),e.setOption("PageSettings.CardFontMainColor",t.FontMainColor),e.setOption("PageSettings.CardLogo",t.Logo),e.setOption("PageSettings.CardNumberPSIconVisibilityClass",!1)):(e.setOption("PageSettings.CardBackgroundColor",""),e.setOption("PageSettings.CardFontLabelColor",""),e.setOption("PageSettings.CardFontMainColor",""),e.setOption("PageSettings.CardLogo","none"),e.setOption("PageSettings.CardNumberPSIconVisibilityClass",!0))},error:function(){e.setOption("PageSettings.CardBackgroundColor",""),e.setOption("PageSettings.CardFontLabelColor",""),e.setOption("PageSettings.CardFontMainColor",""),e.setOption("PageSettings.CardLogo","none"),e.setOption("PageSettings.CardNumberPSIconVisibilityClass",!0)}})},getVTBBounusAmount:function(t,n,o,a){e.setOption("LoadingButtons.PayButton",!0);var r=e.options.Elements.ErrorField;$ph.ajax({url:"/apim/BonusBalance",data:$ph.getQuery({data:"Key="+t+";CardNumber="+n+";EYear="+a+";EMonth="+o}),type:"POST",timeout:6e4,success:function(t){if(t.Success)if(t.BonusAmount>0){
e.setOption("VisibilitySettings.BonusAmountContainer",!0),e.setOption("VTBMultiBonusUsing",!0);var n=e.options.Elements.Amount.value,o=parseInt(n)/100<=parseInt(t.BonusAmount)/100?parseInt(parseInt(n)/100)-1:parseInt(t.BonusAmount)/100;e.options.Elements.VTBMaxBonusAmountValue().innerHTML=o;var a=IMask(e.options.Elements.BonusAmountInput(),{mask:Number,min:1,max:parseInt(o)});a.value="1"}else r.innerHTML="На вашем бонусном счете недостаточно мультибонусов для оплаты заказа. Вы можете оплатить всю сумму покупки банковской картой";else e.setOption("VisibilitySettings.BonusAmountContainer",!1),e.setOption("VTBMultiBonusUsing",!1),r.innerHTML="Пожалуйста, проверьте корректность указанных данных по вашей карте ВТБ";e.setOption("LoadingButtons.PayButton",!1)},error:function(){}})},initAdditionalPaymentMethods:function(){!e.options.IsForcedHidden&&e.options.ApplePay&&window.ApplePaySession&&(Payture.ApplePay?Payture.ApplePay():console.log("apple-pay.ext.js library not found! Please check javascript include section on your page")),e.options.GooglePay&&!window.ApplePaySession&&window.PaymentRequest&&(Payture.GooglePay?Payture.GooglePay():console.log("google-pay.ext.js library not found! Please check javascript include section on your page")),e.options.IsForcedHidden||!e.options.GoogleWebPay||window.ApplePaySession||(Payture.GoogleWebPay?Payture.GoogleWebPay():console.log("google-web-pay.ext.js library not found! Please check javascript include section on your page")),!e.options.IsForcedHidden&&e.options.SamsungPay&&(Payture.SamsungPay?Payture.SamsungPay():console.log("samsung-pay.ext.js library not found! Please check javascript include section on your page")),e.options.MobileCommercePay&&(Payture.MobileCommercePay?Payture.MobileCommercePay():console.log("mobile-commerce.ext.js library not found! Please check javascript include section on your page")),e.options.MultibonusPay&&(Payture.MultibonusPay?Payture.MultibonusPay():console.log("multibonus-pay.ext.js library not found! Please check javascript include section on your page")),e.options.TerminalPay&&(Payture.TerminalPayPay?Payture.TerminalPayPay():console.log("terminal-pay.ext.js library not found! Please check javascript include section on your page")),e.options.SBPPay&&(Payture.SBPPay?Payture.SBPPay():console.log("sbp-pay.ext.js library not found! Please check javascript include section on your page")),e.options.SberPay&&(Payture.SberPay?Payture.SberPay():console.log("sber-pay.ext.js library not found! Please check javascript include section on your page")),e.options.TinkoffPay&&(Payture.TinkoffPay?Payture.TinkoffPay():console.log("tinkoff-pay.ext.js library not found! Please check javascript include section on your page")),e.options.QiwiPay&&(Payture.QiwiPay?Payture.QiwiPay():console.log("qiwi-pay.ext.js library not found! Please check javascript include section on your page")),e.options.MP&&(Payture.Masterpass?Payture.Masterpass():console.log("masterpass.ext.js library not found! Please check javascript include section on your page")),e.options.MirPay&&(Payture.MirPay?Payture.MirPay():console.log("mir-pay.ext.js library not found! Please check javascript include section on your page")),e.options.YandexPay&&(Payture.YandexPay?Payture.YandexPay():console.log("yandex-pay.ext.js library not found! Please check javascript include section on your page"))},removeError:function(t){if(e.options.PageSettings.currentErrors&&e.options.PageSettings.currentErrors.length>0){var n=e.options.PageSettings.CurrentErrors.slice(),o=n.filter(function(e){return e.Key!==t});n.length!==o.length&&e.setOption("PageSettings.CurrentErrors",o)}},payContinue:function(t,n){$ph.ajax({url:"/"+("inpay"===e.options.PayMethod?"apim":"vwapi")+"/PayContinue",data:"Session="+e.options.QueryParams.SessionId+"&AuthId="+t.AuthId,type:"POST",timeout:6e4,success:function(t){t.Success?e.onSuccessContinue(t,n):e.onError(t)},error:function(t){e.onError(t)}})},preAuth:function(t,n){e.setOption("LoadingButtons.PayButton",!0),e.setOption("DisableSettings.PayButton",!0),e.setOption("UsingFormValues.BrowserData",!0),e.setOption("UsingFormValues.AuthId",!1),e.setOption("Iframe3DSReady",!1),$ph.ajax({url:"/"+("inpay"===e.options.PayMethod?"apim":"vwapi")+"/PreAuth",data:e.getPreAuthFormValues(n),type:"POST",timeout:6e4,success:function(n){n.Success?(e.setOption("UsingFormValues.BrowserData",!1),n.ThreeDSMethodURL2&&y(n.ThreeDSMethodURL2,n.ThreeDSMethodData),n.AuthId&&""!==n.AuthId&&n.ThreeDSServerTransId&&""!==n.ThreeDSServerTransId&&n.ThreeDSMethodURL&&""!==n.ThreeDSMethodURL&&n.ThreeDSMethodNotificationURL&&""!==n.ThreeDSMethodNotificationURL?(e.setOption("FormValues.AuthId",n.AuthId),e.setOption("UsingFormValues.AuthId",!0),p(n.ThreeDSServerTransId,n.ThreeDSMethodURL,n.ThreeDSMethodNotificationURL,t)):""!==n.AuthId?(e.setOption("FormValues.AuthId",n.AuthId),e.setOption("UsingFormValues.AuthId",!0),t?t():e[e.options.PayMethod]()):t?t():e[e.options.PayMethod]()):t?t():e[e.options.PayMethod]()},error:function(t){e.onError(t)}})}}}(),_view=function(){var model=null,view=null,options=null,data=null,elements=null,setActionsHandlingByClassName=function(){var e=function(e,t){var n=e.selectionStart,o=e.selectionEnd-n,a="",r=e.value;o>0&&(e.value=r.substring(0,n)+r.substring(n+o),r=e.value),a=r.substring(0,n)+t+r.substring(n,r.length),n++,e.value=a,e.selectionStart=n,e.selectionEnd=n},t=null;options.CheckNumbers&&(t=document.getElementsByClassName("onlyNum"),Array.prototype.forEach.call(t,function(e){$ph.addEvent("keydown",e,function(e){var t=e.which||e.keyCode;if($ph.isIgnoredCharCode(t))return!0;var n=e.key||String.fromCharCode(t),o=e.altKey||e.ctrlKey||e.metaKey;$ph.regexp.isNumber(n)||o||e.preventDefault()})})),options.CheckLetters&&(t=document.getElementsByClassName("onlyLat"),Array.prototype.forEach.call(t,function(t){$ph.addEvent("keydown",t,function(t){var n=t.which||t.keyCode;if($ph.isIgnoredCharCode(n))return!0;var o=t.key||String.fromCharCode(n),a=$ph.translateRuToEn(o),r=t.altKey||t.ctrlKey||t.metaKey,i=t.currentTarget;r||(/[a-zA-Z]/.test(a)&&1===a.length&&e(i,a),t.preventDefault())})})),options.CheckBins&&(t=document.getElementsByClassName("onlyCardNum"),Array.prototype.forEach.call(t,function(e){$ph.addEvent("input",e,function(t){var n=t.which||t.keyCode;if($ph.isIgnoredCharCode(n))return!0;setTimeout(function(){(e.value&&String(e.value).replace(/ /g,"").length>5&&options.HelpVariables.tempCardNumber.length<6||String(e.value).replace(/ /g,"").length<6&&options.HelpVariables.tempCardNumber.length>5||String(e.value).replace(/ /g,"").length>5&&String(e.value).replace(/ /g,"").substring(0,5)!==options.HelpVariables.tempCardNumber.substring(0,5))&&model.getBankProfileByBIN(String(e.value).replace(/ /g,"").substr(0,6)),model.setOption("HelpVariables.tempCardNumber",String(e.value).replace(/ /g,"").substr(0,11))},100)})}))},redefineClearedElements=function(){els=options.ElementsToRedefine;for(name in els){var e=els[name];switch(e.selectorType){case"id":options[e.source][name]=document.getElementById(e.selector);break;case"name":options[e.source][name]=document.getElementsByName(e.selector)[0];break;case"query":options[e.source][name]=document.querySelectorAll(e.selector)[0]}}},translateTemplate=function(){var e=options.Language,t=options.TemplateText,n=document.querySelectorAll("[translate-value]"),o=document.querySelectorAll("[translate-placeholder]");n.forEach(function(n){var o=n.getAttribute("translate-value");switch(n.innerHTML=t[e][o],o){case"Rub":model.options.CurrencySymbol&&(n.innerHTML=model.options.CurrencySymbol)}}),o.forEach(function(n){var o=n.getAttribute("translate-placeholder");n.placeholder=t[e][o]}),redefineClearedElements(),setCustomLogo(),setProviderNameAndDescription(),setBodyVisibility(!0)},addBodyVisibilityClass=function(){$ph.addClass(document.querySelector("body"),"visibility"),document.querySelector(".visibility").style.display="none"},setBodyVisibility=function(e){document.querySelector(".visibility").style.display=e?"block":"none"},setProviderNameAndDescription=function(){void 0!==model.options.CompanyName&&model.options.Elements.ProviderName&&(model.options.Elements.ProviderName.innerHTML=model.options.CompanyName),void 0!==model.options.CompanyDescription&&model.options.Elements.ProviderDescription&&(model.options.Elements.ProviderDescription.innerHTML=model.options.CompanyDescription)},setCustomLogo=function(){model.options.LogoUrl&&model.options.Elements.LogoVisibility()&&(model.options.Elements.LogoVisibility().style.backgroundImage="unset",model.options.Elements.LogoVisibility().style.backgroundSize="auto 40px",model.options.Elements.LogoVisibility().style.backgroundPositionY="center",model.options.Elements.LogoVisibility().style.width="unset",model.options.Elements.LogoVisibility().innerHTML='<img src="'+model.options.LogoUrl+'" alt=""/>')},collectProductName=function(){var e=document.querySelector("#product-name"),t="";t=elements.ProductName&&""!==elements.ProductName.value&&"{product}"!==elements.ProductName.value?elements.ProductName.value:options.TemplateText[options.Language].OrderNumber+(elements.OrderId?elements.OrderId.value:""),elements.ProductDescription&&""!==elements.ProductDescription.value&&"{ProductDescription}"!==elements.ProductDescription.value&&(t+=" "+elements.ProductDescription.value),e&&(e.innerHTML=t)},maskFields=function(){Payment.formatCardNumber(data.CardNumber,null,data.SecureCode),Payment.formatCardCVC(data.SecureCode),model.options.maskDate=IMask(data.EDate,{mask:"MM/YY",lazy:!0,blocks:{YY:{mask:IMask.MaskedRange,from:0,to:99,maxLength:2,placeholderChar:options.TemplateText[options.Language].Y},MM:{mask:[{mask:IMask.MaskedRange,from:1,to:12,startsWith:"1",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"2",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"3",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"4",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"5",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"6",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"7",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"8",placeholderChar:options.TemplateText[options.Language].M},{mask:"{\\0}0",startsWith:"9",placeholderChar:options.TemplateText[options.Language].M},{mask:IMask.MaskedRange,from:0,to:9,startsWith:"0",placeholderChar:options.TemplateText[options.Language].M},{mask:"00",startsWith:"",placeholderChar:options.TemplateText[options.Language].M}],dispatch:function(e,t){var n=(t.value+e).replace(/\D/g,"");return t.compiledMasks.find(function(e){return n.indexOf(e.startsWith)>-1})||this.dynamicMasked.compiledMasks[this.dynamicMasked.compiledMasks.length-1]}}}}),model.options.maskDate.on("complete",function(){setTimeout(function(){blurDateField()},0)})},backspaceFlag=!1,blurDateField=function(){document.getElementsByName(data.EDate.getAttribute("next"))[0].focus()},changeCaretPosition=function(e){var t=e.currentTarget,n=e.code||e.key,o=t.getAttribute("next"),a=t.getAttribute("prev"),r=parseInt(t.getAttribute("maxlength"));t.value;if(void 0===n)return!0;var i=e.target.selectionStart;if("Backspace"!==n&&"ArrowLeft"!==n&&"Left"!==n||0!==i||!a){if(i===r&&"ArrowLeft"!==n){var s=document.getElementsByName(o)[0];void 0!==s?(setTimeout(function(){s.focus()},10),backspaceFlag=!1):(s=document.getElementsByName("Pay")[0],setTimeout(function(){s.focus()},10),backspaceFlag=!1)}}else{if(backspaceFlag){var l=document.getElementsByName(a)[0];void 0!==l&&setTimeout(function(){l.focus()},10)}backspaceFlag=!backspaceFlag}},setFormActionsHandling=function(){setActionsHandlingByClassName();for(key in data){var e=data[key];e&&($ph.addEvent("focus",e,function(e){view.removeAllErrors(),options.Elements.ErrorField.innerHTML=""}),$ph.addEvent("click",e,function(e){var t=view.getFieldNameByField(e.currentTarget);view.removeError(t)}),$ph.addEvent("keydown",e,function(e){var t=view.getFieldNameByField(e.currentTarget);view.removeError(t)}),$ph.addEvent("input keyup",e,function(e){var t=view.getFieldNameByField(e.currentTarget);if("EDate"===t&&""!==model.options.maskDate.value&&data.EDate.setAttribute("maxLength",6),view.removeError(t),view.updateFormValueFromData(t),changeCaretPosition(e),options.DisableButton&&view.checkButton(!1),model.options.PayWithHalva&&"CardNumber"===t){var n=parseInt(model.options.FormValues.CardNumber);0===String(n).indexOf("53510413")?model.setOption("VisibilitySettings.PayWithHalva",!0):(model.setOption("VisibilitySettings.PayWithHalva",!1),model.setOption("UsingFormValues.PayWithHalva",!1),model.options.Elements.PayWithHalvaMark().checked=!1)}}),$ph.addEvent("paste",e,function(e){}),$ph.addEvent("blur",e,function(e){var t=view.getFieldNameByField(e.currentTarget);"EDate"===t&&(data.EDate.setAttribute("maxLength",5),model.options.maskDate&&model.options.maskDate.value),"masterpass_saved"!==options.PaymentType&&""!==e.currentTarget.value&&view.checkErrors(t)}))}$ph.addEvent("click",elements.PayButton,function(e){model.setOption("PaymentType","card_pay"),manualSubmit(e)}),$ph.addEvent("change",elements.EmailVisibility,function(e){model.setOption("VisibilitySettings.EMailBlock",!options.VisibilitySettings.EMailBlock),view.checkButton()}),$ph.addEvent("change",elements.PayWithHalvaMark(),function(e){model.setOption("UsingFormValues.PayWithHalva",e.currentTarget.checked)})},manualSubmit=function(e){if(e&&(e.preventDefault(),"none"===e.currentTarget.style.display))return!1;if(options.DisableSettings.PayButton)view.checkErrorsOnSubmit();else{if(options.VisibilitySettings.OverlayCvv)options.FormValues.GoogleCvv.length>2&&(model.setOption("LoadingButtons.CvvButton",!0),model.googleProcessPaymentWCVVAction());else switch(options.PaymentType){case"card_pay":model.options.use_3ds2_preauth&&model.options.use_3ds2?($ph.extend(model.options.UsingFormValues,{AuthId:!1}),$ph.extend(model.options.FormValues,{AuthId:""}),model.preAuth()):model[options.PayMethod]();break;case"yandex_pay":model.yandexPay();break;case"apple_pay":model.applePay();break;case"google_pay":model.googleWebPay();break;case"samsung_pay":model.samsungPay();break;case"mobile_commerce":case"terminal_pay":break;case"masterpass_new":model.masterpassNew();break;case"masterpass_saved":model.masterpassSaved();break;case"sber_pay":model.sberPay();break;case"tinkoff_pay":model.tinkoffPay()}console.log("no errors due submit")}},updateEMonthEYearFromEDate=function(){var e=options.FormValues.EDate,t=e.split("/");model.setOption("FormValues.EMonth",t[0]),t.length>1&&model.setOption("FormValues.EYear",t[1])},setFormValueListening=function(){["CardNumber","CardHolder","SecureCode","EDate"].forEach(function(e){model.addListener("FormValues."+e,function(e,t){view.updateDataValue(e,t)})})},initFingerprint=function(){var e=data.EDate;if(options.Fingerprint){var t=(new Date).getTime(),n=options.FPSettings;n.TimeInit=t;var o=function(){view.checkErrors("EDate")&&!n.isFingerprintSended&&(model.sendFingerPrint(),$ph.removeEvent("change",e,o))},a=function(){n.TimeMouseFirstClick=(new Date).getTime()-t,$ph.removeEvent("keydown",document,a)},r=function(){n.TimeFirstClick=(new Date).getTime()-t,$ph.removeEvent("keypress",document,r),$ph.removeEvent("click",document,r)},i={x:null,y:null},s=function(e){i.x&&(n.TotalDistance+=Math.sqrt(Math.pow(i.y-e.clientY,2)+Math.pow(i.x-e.clientX,2))),i.x=e.clientX,i.y=e.clientY};$ph.addEvent("mousemove",document,s),$ph.addEvent("keypress",document,r),$ph.addEvent("click",document,r),$ph.addEvent("keydown",document,a),$ph.addEvent("change",e,o)}},setPageSettingsListening=function(){model.addListener("PageSettings.CurrentErrors",function(e,t,n){renderErrors(t,n)}),model.addListener("PageSettings.RedirectUrl",function(e,t){elements.ResultBlockReturnMessage.getElementsByTagName("a")[0].setAttribute("href",t),setTimeout(function(){window.location.href=t},options.Constants.RedirectTimeout)}),model.addListener("PageSettings.CardFontLabelColor",function(e,t,n){view.setCardHTMLProperty(e,t,n)}),model.addListener("PageSettings.CardFontMainColor",function(e,t,n){view.setCardHTMLProperty(e,t,n)}),model.addListener("PageSettings.CardBackgroundColor",function(e,t,n){view.setCardHTMLProperty(e,t,n)}),model.addListener("PageSettings.CardLogo",function(e,t,n){view.setCardHTMLProperty(e,t,n)}),model.addListener("PageSettings.CardNumberPSIconVisibilityClass",function(e,t,n){view.setCardHTMLProperty(e,t,n)}),model.addListener("PageSettings.GoMain",function(e,t,n){if(t){var o=model.options.PageSettings.GoMainCallback;for(var a in o)model.setOption("VisibilitySettings."+a,o[a]);model.setOption("PaymentType","card_pay"),model.setOption("PageSettings.GoMain",!1),model.setOption("PageSettings.GoMainCallback",null)}})},showErrorText=function(e){if(e&&e.Key){var t=view.getFieldByFieldName(e.Key);if("SPAN"===t.nextSibling.nodeName)t.nextSibling.innerHTML=e.Message;else{var n=document.createElement("span");n.innerHTML=e.Message,t.parentNode.insertBefore(n,t.nextSibling)}}else if(""===e.Key){var o=options.Elements.ErrorField;o.innerHTML=e.Message}},renderErrors=function(e,t){var n=options.Elements.ErrorField;if(e.length>t.length){var o=e.filter(function(e){return-1===t.indexOf(e)})[0],a=view.getFieldByFieldName(o.Key);showErrorText(o),a instanceof HTMLInputElement&&($ph.addClass(a.parentElement.parentElement,"error"),$ph.addClass(a.parentElement,"error"))}else t.filter(function(t){return-1===e.indexOf(t)}).forEach(function(e){e&&(a=view.getFieldByFieldName(e.Key),showErrorText(e),a instanceof HTMLInputElement&&($ph.removeClass(a.parentElement.parentElement,"error"),$ph.removeClass(a.parentElement,"error")))});if(options.PageSettings.CurrentErrors.length>0)var o=options.PageSettings.CurrentErrors.slice(-1)[0];else(t&&t.length>0&&""!==t[0].Key||t&&0===t.length||!t)&&(n.innerHTML="")},getFormValueFromFieldValue=function(e,t){if(t){var n=void 0;switch(e){case"AddCard":case"AddCardMP":n=t.checked?"True":"";break;case"MPPhone":n=t.value.replace(/\D/g,"");break;case"MPNewCardName":n=t.value;break;case"CardHolder":n=t.value.toUpperCase();break;default:n=t.value.replace(/\s/g,"")}return n}},initFormValue=function(){for(key in data)view.updateFormValueFromData(key)},setPaymentTypeHandling=function(){for(key in elements.PayTypeButtons)$ph.addEvent("click",elements.PayTypeButtons[key],view.paymentTypeHandlingCallback)},focusFirstInput=function(){for(var e=document.querySelectorAll("input"),t=0,n=e.length;t<n;t++)if(!isHidden(e[t])){e[t].focus(),e[t].click();break}},isHidden=function(e){var t=window.getComputedStyle(e);return"none"===t.display||"hidden"===t.visibility||0===e.offsetWidth&&0===e.offsetHeight},setPaymentTypeIcosVisibility=function(e){options.Elements.ErrorField.innerHTML="",model.options.Elements.PaymentTypeHeaderIcon&&($ph.removeClass(model.options.Elements.PaymentTypeHeaderIcon,"payment-type-logo__sber"),$ph.removeClass(model.options.Elements.PaymentTypeHeaderIcon,"payment-type-logo__sbp"),$ph.removeClass(model.options.Elements.PaymentTypeHeaderIcon,"payment-type-logo__tinkoff")),model.options.Elements.PaymentTypeCaption&&(model.options.Elements.PaymentTypeCaption().innerHTML=""),"multibonus_pay"===e.type?(model.setOption("VisibilitySettings.PayMethodsBlocks",!1),model.setOption("VisibilitySettings.CardForm",!1),model.setOption("VisibilitySettings.BackButton",!0),model.setOption("VisibilitySettings.MultibonusPayBlock",!0)):("sbp_pay"!==e.type&&"sber_pay"!==e.type&&"tinkoff_pay"!==e.type||(model.setOption("PageSettings.GoMainCallback",JSON.parse(JSON.stringify(model.options.VisibilitySettings))),model.options.Elements.PaymentTypeHeaderIcon&&$ph.addClass(model.options.Elements.PaymentTypeHeaderIcon,model.options.PaymentTypeIcon),model.options.Elements.PaymentTypeCaption&&(model.options.Elements.PaymentTypeCaption().innerHTML=model.options.PaymentTypeCaption)),model.setOption("VisibilitySettings.PayButton",e.isPayButtonVisible),model.setOption("VisibilitySettings.CardOneBlock",e.icCardOneVisible),model.setOption("VisibilitySettings.MobileCommerceBlock",e.isMobileCommerceVisible),model.setOption("VisibilitySettings.TerminalPayBlock",e.isTerminalPayVisible),model.setOption("VisibilitySettings.SBPPayBlock",e.isSBPPayVisible),model.setOption("VisibilitySettings.SberPayBlock",e.isSberPayVisible),model.setOption("VisibilitySettings.TinkoffPayBlock",e.isTinkoffPayVisible),"sbp_pay"!==e.type&&"sber_pay"!==e.type&&"tinkoff_pay"!==e.type||(model.setOption("VisibilitySettings.PayMethodsBlocks",!1),model.setOption("VisibilitySettings.FootnoteVisibility",!1),model.setOption("VisibilitySettings.PaytureConditions",!1))),"card_pay"!==e.type?(elements.MPContainerLogin&&model.setOption("VisibilitySettings.MPContainerLogin",!1),elements.GooglePayButton&&model.setOption("VisibilitySettings.GooglePayButton",!1),elements.CardPayMethodButtonContainer()&&($ph.removeClass(elements.PayMethodsBlocks,"only-desktop"),$ph.addClass(model.options.Elements.CancelButton(),"is-hidden")),view.toggleCardFormVisibilityMobile()):(elements.MPContainerLogin&&model.setOption("VisibilitySettings.MPContainerLogin",!0),elements.GooglePayButton&&model.setOption("VisibilitySettings.GooglePayButton",!0),elements.CardPayMethodButtonContainer()&&($ph.addClass(elements.PayMethodsBlocks,"only-desktop"),model.options.IsAnyAdditionalPayMethodAvailable&&$ph.removeClass(model.options.Elements.CancelButton(),"is-hidden")),elements.PaytureConditions&&model.setOption("VisibilitySettings.PaytureConditions",!0),$ph.removeClass(model.options.Elements.CardOneBlock,"only-desktop"),$ph.removeClass(model.options.Elements.PayButton,"only-desktop"))},setPaymentTypeListening=function(){model.addListener("PaymentType",function(e,t){for(key in elements.PayTypeButtons)elements.PayTypeButtons[key].dataset.type;switch(model.setOption("PaymentTypeIcon",""),model.setOption("PaymentTypeCaption",""),t){case"init":view.setInitView();break;case"card_pay":setPaymentTypeIcosVisibility({icCardOneVisible:!0,isEmailVisible:!1,isMobileCommerceVisible:!1,isTerminalPayVisible:!1,isSBPPayVisible:!1,isSberPayVisible:!1,isTinkoffPayVisible:!1,isPayButtonVisible:!0,type:"card_pay"});break;case"apple_pay":case"google_pay":case"samsung_pay":break;case"mobile_commerce":setPaymentTypeIcosVisibility({icCardOneVisible:!1,isEmailVisible:!1,isMobileCommerceVisible:!0,isTerminalPayVisible:!1,isSBPPayVisible:!1,isSberPayVisible:!1,isTinkoffPayVisible:!1,isPayButtonVisible:!1,type:"mobile_commerce"});break;case"terminal_pay":setPaymentTypeIcosVisibility({icCardOneVisible:!1,isEmailVisible:!1,isMobileCommerceVisible:!1,isTerminalPayVisible:!0,isSBPPayVisible:!1,isSberPayVisible:!1,isTinkoffPayVisible:!1,isPayButtonVisible:!1,type:"terminal_pay"});break;case"sbp_pay":model.setOption("PaymentTypeIcon","payment-type-logo__sbp"),model.setOption("PaymentTypeCaption",model.options.TemplateText[model.options.Language].PaymentTypeSBPCaption),setPaymentTypeIcosVisibility({icCardOneVisible:!1,isEmailVisible:!1,isMobileCommerceVisible:!1,isTerminalPayVisible:!1,isSBPPayVisible:!0,isSberPayVisible:!1,isTinkoffPayVisible:!1,isPayButtonVisible:!1,type:"sbp_pay"}),model.sbpPay();break;case"sber_pay":model.setOption("PaymentTypeIcon","payment-type-logo__sber"),model.setOption("PaymentTypeCaption",model.options.TemplateText[model.options.Language].PaymentTypeSberCaption),setPaymentTypeIcosVisibility({icCardOneVisible:!1,isEmailVisible:!1,isMobileCommerceVisible:!1,isTerminalPayVisible:!1,isSBPPayVisible:!1,isSberPayVisible:!0,isTinkoffPayVisible:!1,isPayButtonVisible:!1,type:"sber_pay"});break;case"multibonus_pay":setPaymentTypeIcosVisibility({icCardOneVisible:!1,isEmailVisible:!1,isMobileCommerceVisible:!1,isTerminalPayVisible:!1,isSBPPayVisible:!1,isSberPayVisible:!1,isTinkoffPayVisible:!1,isPayButtonVisible:!1,type:"multibonus_pay"});break;case"tinkoff_pay":model.setOption("PaymentTypeIcon","payment-type-logo__tinkoff"),model.setOption("PaymentTypeCaption",model.options.TemplateText[model.options.Language].PaymentTypeTinkoffCaption),setPaymentTypeIcosVisibility({icCardOneVisible:!1,isEmailVisible:!1,isMobileCommerceVisible:!1,isTerminalPayVisible:!1,isSBPPayVisible:!1,isSberPayVisible:!1,isTinkoffPayVisible:!0,isPayButtonVisible:!1,type:"tinkoff_pay"}),model.tinkoffPay()}view.checkButton(),view.removeAllErrors()})},setCancelButtonsListening=function(){document.addEventListener("click",function(e){-1===e.target.className.indexOf("button__cancel")&&-1===e.target.parentElement.className.indexOf("button__cancel")||view.requestInitView()})},setupSettings=function(){var e=options.VisibilitySettings,t=options.DisableSettings,n=options.InnerHTML,o=options.LoadingButtons;for(var a in e){var r=data[a]?data[a]:elements[a];$ph.setVisibility(elements[a],options.VisibilitySettings[a]),"EmailVisibility"===a&&options.VisibilitySettings[a]&&$ph.setVisibility(elements.CardCheckboxesContainer,!0,"flex"),model.addListener("VisibilitySettings."+a,function(e,t,n,o){$ph.setVisibility(o,t,"ResultBlock"===e?"flex":null)},r)}for(var a in t){var r=data[a]?data[a]:elements[a];"PayButton"!==a&&"VTBBonusAccess"!==a&&$ph.setDisable(r,options.DisableSettings[a]),model.addListener("DisableSettings."+a,function(e,t,n,o){switch(e){case"PayButton":t?$ph.addClass(o,"disabled"):$ph.removeClass(o,"disabled");break;case"VTBBonusAccess":t?options.VTBMultiBonus&&t!==n&&(model.setOption("VTBMultiBonusUsing",!1),model.setOption("VisibilitySettings.BonusAmountContainer",!1)):options.VTBMultiBonus&&t!==n&&model.getVTBBounusAmount(model.options.FormValues.Key,String(model.options.FormValues.CardNumber).replace(/ /g,""),model.options.FormValues.EMonth,model.options.FormValues.EYear);break;default:$ph.setDisable(o,t)}},r)}for(var a in n){var r=data[a]?data[a]:elements[a];model.addListener("InnerHTML."+a,function(e,t,n,o){o.innerHTML=t},r)}for(var a in o){var r=data[a]?data[a]:elements[a];model.addListener("LoadingButtons."+a,function(e,t,n,o){!0===t?$ph.addClass(o,"loading"):$ph.removeClass(o,"loading")},r)}},getJSONResponse=function(){var responseJSON=document.querySelector(".response_json");return responseJSON=responseJSON?responseJSON.innerText:"",-1==responseJSON.indexOf("{response_json}")&&""!=responseJSON?eval("("+responseJSON+")"):{}},appendCardSectionVisibility=function(){var e=model.options,t=e.Language,n=document.querySelector("#payment-methods .payment-methods__inner");if(n&&!e.Elements.CardPayMethodButtonContainer()){var o=document.createElement("div");o.setAttribute("class","card-section-container");var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("class","button ico card-pay"),a.setAttribute("data-type","card_pay"),a.innerHTML="<span>"+e.TemplateText[t].PayWithCard+"</span>",o.append(a),a.style.display="block",n.prepend(o),$ph.addEvent("click",elements.CardPayMethodButton(),view.paymentTypeHandlingCallback)}$ph.addClass(e.Elements.CancelButton(),"is-hidden")},appendPayWithHalvaBlockToDocument=function(){var e=document.createElement("div");e.setAttribute("id","paywithhalva-container"),e.setAttribute("class","checkmark-container");var t=document.getElementById("overlay-cvv");if(t){t.parentNode.insertBefore(e,t),e.innerHTML='<label class="caption"><input id="PayWithHalva" type="checkbox"><span class="checkmark"></span><span translate-value="PayWithHalva">Оплата счетом ХАЛВА</span></label>'}},appendVTBMultiBonusBlockToDocument=function(){var e=document.createElement("div");e.setAttribute("id","vtb-bonus-amount-container"),e.setAttribute("class","vtb-bonus-amount-container");var t=document.getElementById("overlay-cvv");if(t){t.parentNode.insertBefore(e,t),$ph.setVisibility(model.options.Elements.BonusAmountContainer,!1),e.innerHTML='<label class="caption" style="margin: 22px 0 7px;display: block;"><span>Укажите количество мультибонусов для оплаты заказа</span></label><ul><li class="ic top-r bottom-r" style="background-color: #fff;border: 1px solid #d9d9d9;padding: 10px 14px;"><div class="label-text" style="top: 6px;">Сумма от 1 до <span id="VTBMaxBonusAmountValue"></span></div><input style="bottom: 6px;" min="0" name="BonusAmount" /></li></ul>'}},countdown=function(e){function t(e){var t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),a=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:a,minutes:o,seconds:n}}var n=Date.parse(new Date),o=new Date(n+1e3*e);!function(e,n){function o(){var e=t(n);r.innerHTML=e.days>0?" "+$ph.plural(e.days,u.PluralDays[0],u.PluralDays[1],u.PluralDays[2]):"",i.innerHTML=e.days>0?e.days:"",0===e.days&&(s.innerHTML=e.hours>0?("0"+e.hours).slice(-2)+":":"",l.innerHTML=("0"+e.minutes).slice(-2)+":",d.innerHTML=("0"+e.seconds).slice(-2)),e.total<=0&&(clearInterval(c),model.setOption("DisableSettings.PayButton",!0),setTimeout(function(){window.location.reload()},3e3))}var a=document.querySelector(e),r=a.querySelector(".days-caption"),i=a.querySelector(".days"),s=a.querySelector(".hours"),l=a.querySelector(".minutes"),d=a.querySelector(".seconds"),u=model.options.TemplateText[model.options.Language];o();var c=setInterval(o,1e3)}(".life-timer",o)};return{init:function(){addBodyVisibilityClass(),model=Payture.__internal__.model,view=Payture.__internal__.view,options=model.options,data=options.Data,elements=options.Elements,appendCardSectionVisibility(),data.SecureCode&&(data.SecureCode.setAttribute("type","new-password"),data.SecureCode.setAttribute("inputmode","numeric"),data.SecureCode.setAttribute("autocomplete","cc-csc")),data.EChequeCustomerContact&&data.EChequeCustomerContact.setAttribute("inputmode","email"),window.onload=function(){view.updateAllFormValuesFromData(),view.updateFormValueFromElements(),view.checkButton()},model.options.PayWithHalva&&appendPayWithHalvaBlockToDocument(),model.options.VTBMultiBonus&&appendVTBMultiBonusBlockToDocument(),collectProductName(),initFormValue(),maskFields(),setFormValueListening(),setPaymentTypeHandling(),setCancelButtonsListening(),initFingerprint(),focusFirstInput(),setPaymentTypeListening(),model.initAdditionalPaymentMethods(),setFormActionsHandling(),setupSettings(),setPageSettingsListening(),translateTemplate(),view.startLifeTimer(),$ph.isEmpty(getJSONResponse())||setTimeout(function(){model.onError(getJSONResponse())},200)},initLight:function(){model=Payture.__internal__.model,view=Payture.__internal__.view,options=model.options,data=options.Data,elements=options.Elements,setupSettings(),setPageSettingsListening()},translateTemplate:function(){translateTemplate()},requestInitView:function(){model.setOption("PaymentType","init")},toggleCardFormVisibilityMobile:function(){model.options.PayByCardButton?($ph.hasClass(model.options.Elements.CardOneBlock,"only-desktop")||$ph.addClass(model.options.Elements.CardOneBlock,"only-desktop"),$ph.hasClass(model.options.Elements.PayButton,"only-desktop")||$ph.addClass(model.options.Elements.PayButton,"only-desktop")):$ph.hasClass(model.options.Elements.CardPayMethodButtonContainer(),"only-desktop")||$ph.addClass(model.options.Elements.CardPayMethodButtonContainer(),"only-desktop")},setInitView:function(){model.options.Elements.PaymentTypeHeaderIcon&&($ph.removeClass(model.options.Elements.PaymentTypeHeaderIcon,"payment-type-logo__sber"),$ph.removeClass(model.options.Elements.PaymentTypeHeaderIcon,"payment-type-logo__sbp"),$ph.removeClass(model.options.Elements.PaymentTypeHeaderIcon,"payment-type-logo__tinkoff")),model.options.Elements.PaymentTypeCaption&&(model.options.Elements.PaymentTypeCaption().innerHTML=""),model.options.Elements.CardPayMethodButtonContainer()&&($ph.removeClass(elements.PayMethodsBlocks,"only-desktop"),$ph.addClass(model.options.Elements.CancelButton(),"is-hidden")),model.setOption("VisibilitySettings.CardOneBlock",!0),model.setOption("VisibilitySettings.PayButton",!0),model.setOption("VisibilitySettings.PaytureConditions",!0),
model.setOption("VisibilitySettings.FootnoteVisibility",!0),this.toggleCardFormVisibilityMobile(),model.setOption("VisibilitySettings.MobileCommerceBlock",!1),model.setOption("VisibilitySettings.TerminalPayBlock",!1),model.setOption("VisibilitySettings.SBPPayBlock",!1),model.setOption("VisibilitySettings.SberPayBlock",!1),model.setOption("VisibilitySettings.TinkoffPayBlock",!1),model.setOption("VisibilitySettings.PayMethodsBlocks",!0),model.setOption("VisibilitySettings.PayForm",!0),model.setOption("VisibilitySettings.ResultBlock",!1),model.options.SberIntervalTimerId&&clearInterval(model.options.SberIntervalTimerId),model.options.SberTimeoutTimerId&&clearTimeout(model.options.SberTimeoutTimerId),model.options.TinkoffIntervalTimerId&&clearInterval(model.options.TinkoffIntervalTimerId),model.options.TinkoffTimeoutTimerId&&clearTimeout(model.options.TinkoffTimeoutTimerId),model.options.IntervalTimerId&&clearInterval(model.options.IntervalTimerId),model.options.TimeoutTimerId&&clearTimeout(model.options.TimeoutTimerId)},paymentTypeHandlingCallback:function(e){if(-1===e.target.className.indexOf("active")||-1===e.target.parentNode.className.indexOf("active")&&-1!==e.target.parentNode.indexOf("yandex")){var t=e.currentTarget.dataset.type;if(void 0===t&&-1!==e.target.parentNode.id.indexOf("yandex")&&(t=e.target.parentNode.dataset.type),void 0!==t)switch(model.setOption("PaymentType",t),focusFirstInput(),t){case"yandex_pay":model.yandexPay();break;case"apple_pay":model.applePay();break;case"google_pay":model.googleWebPay();break;case"samsung_pay":model.samsungPay()}}},checkErrorsOnSubmit:function(){var e=options.FormValues;switch(options.PaymentType){case"masterpass_new":case"card_pay":["CardHolder","CardNumber","EDate","SecureCode","EChequeCustomerContact"].forEach(function(t){if(!view.validateFormValue[t]||view.validateFormValue[t]().Success&&""!==e[t]||"EChequeCustomerContact"===t||!model.options.UsingFormValues[t]&&"EDate"!==t){if(model.options.UsingFormValues[t]&&view.validateFormValue[t]&&!view.validateFormValue[t]().Success&&"EChequeCustomerContact"===t){var n={Key:t,Message:view.validateFormValue[t]().ErrorMessage};view.addError(n),options.Elements.EmailVisibilityCheckbox.checked=!0,model.setOption("VisibilitySettings.EMailBlock",!0)}}else{var n={Key:t,Message:view.validateFormValue[t]().ErrorMessage};view.addError(n)}})}},checkButton:function(){var e=!0,t=!0;options.FormValues;switch(options.PaymentType){case"masterpass_new":case"card_pay":var n=["CardHolder","CardNumber","EDate","SecureCode","EChequeCustomerContact"],o=["CardHolder","CardNumber","EDate"];model.options.UsingFormValues.SecureCode||(n=["CardHolder","CardNumber","EDate","EChequeCustomerContact"]),n.forEach(function(t){view.validateFormValue[t]&&!view.validateFormValue[t]().Success&&(e=!1)}),o.forEach(function(e){view.validateFormValue[e]&&!view.validateFormValue[e]().Success&&(t=!1)});break;case"masterpass_saved":var n=["SecureCode","EChequeCustomerContact"];model.options.UsingFormValues.SecureCode||(n=["EChequeCustomerContact"]),n.forEach(function(t){view.validateFormValue[t]&&!view.validateFormValue[t]().Success&&(e=!1)});break;case"google_pay":var n=["GoogleCvv"],a=!0;n.forEach(function(e){view.validateFormValue[e]&&!view.validateFormValue[e]().Success&&(a=!1)}),model.setOption("DisableSettings.CvvButton",!a);case"yandex_pay":case"apple_pay":case"samsung_pay":case"mobile_commerce":case"terminal_pay":e=!0;break;case"sber_pay":e=!1;break;default:e=!0}model.setOption("DisableSettings.PayButton",!e),model.setOption("DisableSettings.VTBBonusAccess",!t)},updateAllFormValuesFromData:function(){for(key in data)view.updateFormValueFromData(key)},updateFormValueFromData:function(e){var t=getFormValueFromFieldValue(e,data[e]);options.FormValues[e]=t,"EDate"===e&&updateEMonthEYearFromEDate()},updateFormValueFromElements:function(e){var t=getFormValueFromFieldValue(e,elements[e]);options.FormValues[e]=t},updateDataValue:function(e,t){options.Data[e].value=t,$ph.trigger(options.Data[e],"paste")},updateElementsValue:function(e,t){options.Elements[e].value=t,$ph.trigger(options.Elements[e],"paste")},validateFormValue:{CardNumber:function(){var e=options.CheckCardData,t=options.FormValues.CardNumber;return{Success:!e||Payment.fns.validateCardNumber(t),ErrorMessage:options.TemplateErrors[options.Language].PanErrors,Element:"CardNumber"}},EDate:function(){var e=options.CheckCardData,t=options.FormValues.EDate;return{Success:!e||Payment.fns.validateCardExpiry(t,null,{year:2022,month:1}),ErrorMessage:options.TemplateErrors[options.Language].WrongDate,Element:"EDate"}},CardHolder:function(){var e=options.CheckCardData,t=options.FormValues.CardHolder;return{Success:!e||(t.length>1&&/^[a-zA-Z0-9.]*$/.test(t)||""===t),ErrorMessage:options.TemplateErrors[options.Language].EmptyCardHolder,Element:"CardHolder"}},SecureCode:function(){return{Success:options.FormValues.SecureCode.length>2,ErrorMessage:options.TemplateErrors[options.Language].EmptyCVV,Element:"SecureCode"}},GoogleCvv:function(){return{Success:options.FormValues.GoogleCvv.length>2,ErrorMessage:options.TemplateErrors[options.Language].EmptyCVV,Element:"GoogleCvv"}},EChequeCustomerContact:function(){var e=options.FormValues.EChequeCustomerContact;return{Success:!options.Elements.EmailVisibilityCheckbox||(options.Elements.EmailVisibilityCheckbox.checked?0!==e.length&&/^\w+([\.+-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e):0===e.length||/^\w+([\.+-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e)),ErrorMessage:options.TemplateErrors[options.Language].WrongEmail,Element:"EChequeCustomerContact"}}},checkAllErrors:function(e){for(key in data)("SecureCode"!==key||e)&&view.checkErrors(key)},checkErrors:function(e){if(!view.validateFormValue[e])return!0;var t=view.validateFormValue[e]();if(!t.Success){var n={Key:e,Message:t.ErrorMessage};return view.addError(n),!1}return view.removeError(e),!0},getFieldNameByField:function(e){var t=options.Data;for(key in t)if(t[key]===e)return key;return!1},getFieldByFieldName:function(e){var t=options.Data;return!!t[e]&&t[e]},removeError:function(e){var t=options.PageSettings.CurrentErrors.slice(),n=t.filter(function(t){return t.Key!==e&&""!==t.Key});t.length!==n.length&&model.setOption("PageSettings.CurrentErrors",n)},addError:function(e){var t=options.PageSettings.CurrentErrors.slice();t.filter(function(t){return t.Key===e.Key}).length>0||(t.push(e),model.setOption("PageSettings.CurrentErrors",t))},setCardSettings:function(e,t,n,o,a){model.setOption("FormValues.CardNumber",e),model.setOption("FormValues.EDate",t),model.setOption("FormValues.SecureCode",n),model.setOption("FormValues.CardHolder",a),model.setOption("DisableSettings.CardNumber",!0),model.setOption("DisableSettings.EDate",!0),model.setOption("DisableSettings.SecureCode",o),model.setOption("UsingFormValues.SecureCode",!o),model.setOption("DisableSettings.CardHolder",!0)},setDefaultCardSettings:function(){model.setOption("FormValues.CardNumber",""),model.setOption("FormValues.EDate",""),model.setOption("FormValues.SecureCode",""),model.setOption("FormValues.CardHolder",model.options.CardHolder),""!==model.options.CardHolder&&model.setOption("UsingFormValues.CardHolder",!0),model.setOption("DisableSettings.CardNumber",!1),model.setOption("DisableSettings.EDate",!1),model.setOption("DisableSettings.SecureCode",!1),model.setOption("UsingFormValues.SecureCode",model.options.UsingFormValues.SecureCode),model.setOption("DisableSettings.CardHolder",!1)},removeAllErrors:function(){model.options.PageSettings.CurrentErrors&&model.options.PageSettings.CurrentErrors.length>0&&model.setOption("PageSettings.CurrentErrors",[])},setCardHTMLProperty:function(e,t,n){var o=document.getElementById("card-block");if(!o||t===n)return!0;switch(e){case"CardLogo":o.querySelectorAll(".ic")[0].style.backgroundImage="none"===t?"none":"url('/Templates/_Resources/img/banklogos/"+t+"')",o.querySelectorAll(".ic")[0].style.backgroundPosition="100% center",o.querySelectorAll(".ic")[0].style.backgroundRepeat="no-repeat",o.querySelectorAll(".ic")[0].style.backgroundSize="auto 40%";break;case"CardBackgroundColor":o.style.backgroundColor=t,Array.prototype.forEach.call(o.querySelectorAll("input"),function(e,n){n>0&&(e.style.webkitBoxShadow=t?"0 0 0px 20px "+t+" inset":"none")});break;case"CardFontMainColor":Array.prototype.forEach.call(o.querySelectorAll("input"),function(e){e.style.color=t,e.style.webkitTextFillColor=t}),Array.prototype.forEach.call(o.querySelectorAll(".ic"),function(e){e.style.color=t});break;case"CardFontLabelColor":Array.prototype.forEach.call(o.querySelectorAll(".label-text"),function(e){e.style.color=t});break;case"CardNumberPSIconVisibilityClass":!t||model.options.MPState&&"Pay"===model.options.MPState?$ph.addClass(o.querySelector(".pan input"),"ps-icon-hidden"):$ph.removeClass(o.querySelector(".pan input"),"ps-icon-hidden")}},startLifeTimer:function(){if(model.options.RemainingTime&&""!==model.options.RemainingTime&&!isNaN(parseInt(model.options.RemainingTime))){if(model.options.Elements.LifeTimer())countdown(parseInt(model.options.RemainingTime));else{var e='<span class="life-timer"><span>'+model.options.TemplateText[model.options.Language].LifeTimerCaption+': </span><span><span class="days"></span><span class="days-caption"></span></span><span class="hours"></span><span class="minutes"></span><span class="seconds"></span></span></div>';document.querySelector(".payment-methods").insertAdjacentHTML("beforebegin",e),view.startLifeTimer()}}}}}(),__internal__={model:_model,view:_view};return{__internal__:__internal__}}(),errors={RU:{default:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",ACCESS_DENIED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",AMOUNT_ERROR:"Некорректная сумма платежа",AMOUNT_EXCEED:"Недостаточно средств или превышен лимит по карте",API_NOT_ALLOWED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CARD_EXPIRED:"Истек срок действия карты",CARD_NOT_FOUND:"Карта не найдена. Попробуйте оплатить другой картой",COMMUNICATE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CURRENCY_NOT_ALLOWED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CUSTOMER_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",DUPLICATE_CARD:"Карта уже существует. Попробуйте оплатить другой картой",DUPLICATE_ORDER_ID:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",DUPLICATE_PROCESSING_ORDER_ID:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",DUPLICATE_USER:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",EMAIL_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",EMPTY_RESPONSE:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",FRAUD_ERROR:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BIN_LIMIT:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BLACKLIST_AEROPORT:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BLACKLIST_BANKCOUNTRY:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BLACKLIST_USERCOUNTRY:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_CRITICAL_CARD:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_CRITICAL_CUSTOMER:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_IP:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_INTERNAL_ERROR:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",ILLEGAL_ORDER_STATE:"Неверное состояние заказа",INTERNAL_ERROR:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",INVALID_PAYTUREID:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INVALID_SIGNATURE:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",ISSUER_BLOCKED_CARD:"Карта заблокирована. Обратитесь в банк выпустивший карту",ISSUER_CARD_FAIL:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_FAIL:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_LIMIT_AMOUNT_FAIL:"Превышен лимит по карте. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_LIMIT_COUNT_FAIL:"Превышен лимит по карте. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_LIMIT_FAIL:"Превышен лимит по карте. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_TIMEOUT:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",MERCHANT_FORWARD:"Перенаправление на другой терминал",MERCHANT_RESTRICTION:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",MPI_CERTIFICATE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",MPI_RESPONSE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",ORDER_NOT_FOUND:"Заказ не найден",ORDER_TIME_OUT:"Время на оплату истекло",PAYMENT_ENGINE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",PROCESSING_ACCESS_DENIED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",PROCESSING_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",PROCESSING_FRAUD_ERROR:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",PROCESSING_TIME_OUT:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",REFUSAL_BY_GATE:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",THREE_DS_ATTEMPTS_FAIL:"Ошибка прохождения 3DS",THREE_DS_AUTH_ERROR:"Ошибка прохождения 3DS",THREE_DS_ERROR:"Ошибка прохождения 3DS",THREE_DS_FAIL:"Ошибка прохождения 3DS",THREE_DS_NOT_ATTEMPTED:"Ошибка прохождения 3DS",THREE_DS_NOTENROLLED:"Карта не вовлечена в систему 3DS",THREE_DS_TIME_OUT:"Превышено время ожидания 3DS",THREE_DS_USER_AUTH_FAIL:"Неверный код 3DS",UNKNOWN_STATE:"Неизвестный статус заказа",USER_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_AUTHORIZATION_CODE:"Неверный код авторизации",WRONG_CARD_INFO:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_CARDHOLDER:"Неверно указан держатель карты",WRONG_CONFIRM_CODE:"Недопустимый код подтверждения",WRONG_CVV:"Недопустимый CVV",WRONG_EXPIRE_DATE:"Неверный срок действия карты",WRONG_PAN:"Неверный номер карты",WRONG_PARAMS:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_PAY_INFO:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_PHONE:"Неверный формат номера телефона",WRONG_USER_PARAMS:"Неверные параметры пользователя",OTHER_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",AMOUNT_EXCEED_BALANCE:"Превышен лимит",AUTHENTICATION_ERROR:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",AUTHORIZATION_TIMEOUT:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",LIMIT_EXCHAUST:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",WRONG_CARD_PAN:"Неверный номер карты",BUSINESS_CARD_REQUIRED:"Карта не поддерживается. Попробуйте оплатить другой",BANK_IS_NOT_ALLOWED:"Карта не поддерживается. Попробуйте оплатить другой",MP_WRONG_OTP:"Введен неверный проверочный код",CODE_CHECK_FAILED:"Ошибка проверки второго фактора",AMOUNT_LIMIT_EXCEEDED:"Превышен лимит",INVALID_AMOUNT:"Некорректная сумма платежа",INVALID_COUNTRY:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INVALID_CURRENCY:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INVALID_VERSION:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",MERCHANT_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",GATEWAY_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CARD_NETWORK_NOT_SUPPORTED:"Карта не поддерживается. Попробуйте оплатить другой",MERCHANT_DOMAIN_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INSECURE_MERCHANT_DOMAIN:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WAITING_TIME_OVER:"Время ожидания истекло"},EN:{default:"Error. Try to pay with another card or try again later",ACCESS_DENIED:"Error. Contact support or try again later",AMOUNT_ERROR:"Incorrect payment amount",AMOUNT_EXCEED:"Insufficient funds or card limit exceeded",API_NOT_ALLOWED:"Error. Contact support or try again later",CARD_EXPIRED:"Card expired",CARD_NOT_FOUND:"Card not found. Try paying with a different card",COMMUNICATE_ERROR:"Error. Contact support or try again later",CURRENCY_NOT_ALLOWED:"Error. Contact support or try again later",CUSTOMER_NOT_FOUND:"Error. Contact support or try again later",DUPLICATE_CARD:"Card already exists. Try to pay with another card",DUPLICATE_ORDER_ID:"Error. Contact support or try again later",DUPLICATE_PROCESSING_ORDER_ID:"Error. Contact support or try again later",DUPLICATE_USER:"Error. Contact support or try again later",EMAIL_ERROR:"Error. Contact support or try again later",EMPTY_RESPONSE:"Error. Contact support or try again later",FRAUD_ERROR:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_ERROR_BIN_LIMIT:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_ERROR_BLACKLIST_AEROPORT:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_ERROR_BLACKLIST_BANKCOUNTRY:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_ERROR_BLACKLIST_USERCOUNTRY:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_ERROR_CRITICAL_CARD:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_ERROR_CRITICAL_CUSTOMER:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_ERROR_IP:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",FRAUD_INTERNAL_ERROR:"The number of allowed attempts has been exceeded. Try to pay with another card or try again later",ILLEGAL_ORDER_STATE:"Invalid order status",INTERNAL_ERROR:"Error. Try to pay with another card or try again later",INVALID_PAYTUREID:"Error. Contact support or try again later",INVALID_SIGNATURE:"Error. Contact support or try again later",ISSUER_BLOCKED_CARD:"The card is blocked. Contact the bank that issued the card",ISSUER_CARD_FAIL:"Error. Try to pay with another card or try again later",ISSUER_FAIL:"Error. Try to pay with another card or try again later",ISSUER_LIMIT_AMOUNT_FAIL:"The card limit has been exceeded. Try to pay with another card or try again later",ISSUER_LIMIT_COUNT_FAIL:"The card limit has been exceeded. Try to pay with another card or try again later",ISSUER_LIMIT_FAIL:"The card limit has been exceeded. Try to pay with another card or try again later",ISSUER_TIMEOUT:"Error. Try to pay with another card or try again later",MERCHANT_FORWARD:"Redirecting to another terminal",MERCHANT_RESTRICTION:"Error. Contact support or try again later",MPI_CERTIFICATE_ERROR:"Error. Contact support or try again later",MPI_RESPONSE_ERROR:"Error. Contact support or try again later",ORDER_NOT_FOUND:"Order not found",ORDER_TIME_OUT:"Order expired",PAYMENT_ENGINE_ERROR:"Error. Contact support or try again later",PROCESSING_ACCESS_DENIED:"Error. Contact support or try again later",PROCESSING_ERROR:"Error. Contact support or try again later",PROCESSING_FRAUD_ERROR:"Error. Try to pay with another card or try again later",PROCESSING_TIME_OUT:"Error. Contact support or try again later",REFUSAL_BY_GATE:"Error. Contact support or try again later",THREE_DS_ATTEMPTS_FAIL:"3DS passage error",THREE_DS_AUTH_ERROR:"3DS passage error",THREE_DS_ERROR:"3DS passage error",THREE_DS_FAIL:"3DS passage error",THREE_DS_NOT_ATTEMPTED:"3DS passage error",THREE_DS_NOTENROLLED:"The card is not 3DS enrolled",THREE_DS_TIME_OUT:"3DS timeout exceeded",THREE_DS_USER_AUTH_FAIL:"Incorrect 3DS code entered",UNKNOWN_STATE:"Unknown transaction status",USER_NOT_FOUND:"Error. Contact support or try again later",WRONG_AUTHORIZATION_CODE:"Incorrect authorisation code",WRONG_CARD_INFO:"Error. Contact support or try again later",WRONG_CARDHOLDER:"Invalid card holder",WRONG_CONFIRM_CODE:"Invalid authorisation code",WRONG_CVV:"Invalid CVV",WRONG_EXPIRE_DATE:"Incorrect valid through date",WRONG_PAN:"Incorrect card number",WRONG_PARAMS:"Error. Contact support or try again later",WRONG_PAY_INFO:"Error. Contact support or try again later",WRONG_PHONE:"Incorrect telephone number",WRONG_USER_PARAMS:"Incorrect user parameters",OTHER_ERROR:"Error. Contact support or try again later",AMOUNT_EXCEED_BALANCE:"Limit is exceeded",AUTHENTICATION_ERROR:"Error. Try to pay with another card or try again later",AUTHORIZATION_TIMEOUT:"Error. Try to pay with another card or try again later",LIMIT_EXCHAUST:"Error. Try to pay with another card or try again later",WRONG_CARD_PAN:"Invalid card number",BUSINESS_CARD_REQUIRED:"The card is not supported. Try to pay with another card",BANK_IS_NOT_ALLOWED:"The card is not supported. Try to pay with another card",MP_WRONG_OTP:"Invalid code entered",CODE_CHECK_FAILED:"Second factor check error",AMOUNT_LIMIT_EXCEEDED:"Limit is exceeded",INVALID_AMOUNT:"Incorrect amount",INVALID_COUNTRY:"Error. Contact support or try again later",INVALID_CURRENCY:"Error. Contact support or try again later",INVALID_VERSION:"Error. Contact support or try again later",MERCHANT_NOT_FOUND:"Error. Contact support or try again later",GATEWAY_NOT_FOUND:"Error. Contact support or try again later",CARD_NETWORK_NOT_SUPPORTED:"The card is not supported. Try to pay with another card",MERCHANT_DOMAIN_ERROR:"Error. Contact support or try again later",INSECURE_MERCHANT_DOMAIN:"Error. Contact support or try again later",WAITING_TIME_OVER:"The waiting time is over"},UA:{default:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",ACCESS_DENIED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",AMOUNT_ERROR:"Некорректная сумма платежа",AMOUNT_EXCEED:"Недостаточно средств или превышен лимит по карте",API_NOT_ALLOWED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CARD_EXPIRED:"Истек срок действия карты",CARD_NOT_FOUND:"Карта не найдена. Попробуйте оплатить другой картой",COMMUNICATE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CURRENCY_NOT_ALLOWED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CUSTOMER_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",DUPLICATE_CARD:"Карта уже существует. Попробуйте оплатить другой картой",DUPLICATE_ORDER_ID:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",DUPLICATE_PROCESSING_ORDER_ID:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",DUPLICATE_USER:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",EMAIL_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",EMPTY_RESPONSE:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",FRAUD_ERROR:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BIN_LIMIT:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BLACKLIST_AEROPORT:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BLACKLIST_BANKCOUNTRY:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_BLACKLIST_USERCOUNTRY:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_CRITICAL_CARD:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_CRITICAL_CUSTOMER:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_ERROR_IP:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",FRAUD_INTERNAL_ERROR:"Превышено количество допустимых попыток. Попробуйте оплатить другой картой или повторите попытку позже",ILLEGAL_ORDER_STATE:"Неверное состояние заказа",INTERNAL_ERROR:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",INVALID_PAYTUREID:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INVALID_SIGNATURE:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",ISSUER_BLOCKED_CARD:"Карта заблокирована. Обратитесь в банк выпустивший карту",ISSUER_CARD_FAIL:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_FAIL:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_LIMIT_AMOUNT_FAIL:"Превышен лимит по карте. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_LIMIT_COUNT_FAIL:"Превышен лимит по карте. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_LIMIT_FAIL:"Превышен лимит по карте. Попробуйте оплатить другой картой или повторите попытку позже",ISSUER_TIMEOUT:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",MERCHANT_FORWARD:"Перенаправление на другой терминал",MERCHANT_RESTRICTION:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",MPI_CERTIFICATE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",MPI_RESPONSE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",ORDER_NOT_FOUND:"Заказ не найден",ORDER_TIME_OUT:"Время на оплату истекло",PAYMENT_ENGINE_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",PROCESSING_ACCESS_DENIED:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",PROCESSING_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",PROCESSING_FRAUD_ERROR:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",PROCESSING_TIME_OUT:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",REFUSAL_BY_GATE:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",THREE_DS_ATTEMPTS_FAIL:"Ошибка прохождения 3DS",THREE_DS_AUTH_ERROR:"Ошибка прохождения 3DS",THREE_DS_ERROR:"Ошибка прохождения 3DS",THREE_DS_FAIL:"Ошибка прохождения 3DS",THREE_DS_NOT_ATTEMPTED:"Ошибка прохождения 3DS",THREE_DS_NOTENROLLED:"Карта не вовлечена в систему 3DS",THREE_DS_TIME_OUT:"Превышено время ожидания 3DS",THREE_DS_USER_AUTH_FAIL:"Неверный код 3DS",UNKNOWN_STATE:"Неизвестный статус заказа",USER_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_AUTHORIZATION_CODE:"Неверный код авторизации",WRONG_CARD_INFO:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_CARDHOLDER:"Неверно указан держатель карты",WRONG_CONFIRM_CODE:"Недопустимый код подтверждения",WRONG_CVV:"Недопустимый CVV",WRONG_EXPIRE_DATE:"Неверный срок действия карты",WRONG_PAN:"Неверный номер карты",WRONG_PARAMS:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_PAY_INFO:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WRONG_PHONE:"Неверный формат номера телефона",WRONG_USER_PARAMS:"Неверные параметры пользователя",OTHER_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",AMOUNT_EXCEED_BALANCE:"Превышен лимит",AUTHENTICATION_ERROR:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",AUTHORIZATION_TIMEOUT:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",LIMIT_EXCHAUST:"Произошла ошибка. Попробуйте оплатить другой картой или повторите попытку позже",WRONG_CARD_PAN:"Неверный номер карты",BUSINESS_CARD_REQUIRED:"Карта не поддерживается. Попробуйте оплатить другой картой",BANK_IS_NOT_ALLOWED:"Карта не поддерживается. Попробуйте оплатить другой картой",MP_WRONG_OTP:"Введен неверный проверочный код",CODE_CHECK_FAILED:"Ошибка проверки второго фактора",AMOUNT_LIMIT_EXCEEDED:"Превышен лимит",INVALID_AMOUNT:"Некорректная сумма платежа",INVALID_COUNTRY:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INVALID_CURRENCY:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INVALID_VERSION:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",MERCHANT_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",GATEWAY_NOT_FOUND:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",CARD_NETWORK_NOT_SUPPORTED:"Карта не поддерживается. Попробуйте оплатить другой картой",MERCHANT_DOMAIN_ERROR:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",INSECURE_MERCHANT_DOMAIN:"Произошла ошибка. Обратитесь в службу поддержки или повторите попытку позже",WAITING_TIME_OVER:"Время ожидания истекло"}},answers={RU:{PAY_SUCCESS_TITLE:"Оплата прошла успешно!",PAY_ERROR_TITLE:"Оплата не прошла!",REDIRECT_TEXT:"Через несколько секунд вы&nbsp;будете перемещены на&nbsp;страницу магазина или&nbsp;нажмите <a href=''>сюда</a> чтобы перейти без&nbsp;ожидания",ADD_SUCCESS_TITLE:"Карта успешно сохранена!",ADD_ERROR_TITLE:"Карта не сохранена!"},EN:{PAY_SUCCESS_TITLE:"The payment is successful!",PAY_ERROR_TITLE:"The payment is unsuccessful!",REDIRECT_TEXT:"Please wait a few seconds OR press <a href=''>here</a>",ADD_SUCCESS_TITLE:"This card is successfully added to your  account!",ADD_ERROR_TITLE:"Sorry, this card was not added to your  account!"},UA:{PAY_SUCCESS_TITLE:"Оплата прошла успешно!",PAY_ERROR_TITLE:"Оплата не прошла!",REDIRECT_TEXT:"Через несколько секунд вы&nbsp;будете перемещены на&nbsp;страницу магазина или&nbsp;нажмите <a href=''>сюда</a> чтобы перейти без&nbsp;ожидания",ADD_SUCCESS_TITLE:"Карта успешно сохранена!",ADD_ERROR_TITLE:"Карта не сохранена!"}},templateText={RU:{ProviderDescription:"Процессинговый центр",MPPhoneFootnote:"Введите ваш телефон, чтобы использовать ранее сохраненную карту или сохранить новую",MPOtpFootnote:"Введите код, отправленный в SMS, или укажите актуальный номер телефона. Подтвержденный номер телефона даст возможность сохранять карты или использовать ранее сохраненные карты",SendOnceAgain:"Отправить ещё раз",ChoosePaymentMethod:"Выберите метод оплаты",Card:"Карта",MobileCommerce:"Мобильная коммерция",TerminalPay:"Терминалы оплаты",SMSForConfirmation:"На указанный номер мобильного телефона выслано смс для подтверждения",LinkedCards:"Сохраненные карты",RemoveCard:"Удалить карту",BankCardDetails:"Детали банковской карты",CardNumber:"Номер карты",CardExpiryDate:"Срок действия карты",VerificationCode:"Проверочный код",Cardholder:"Имя и Фамилия на карте",RememberCard:"Сохранить карту",
MPAddCardFootnote:"Сохраните карту, чтобы больше не вводить номер и срок действия карты вручную. Карты сохраняются в связке с номером вашего телефона. Используйте сохраненную карту везде, где доступен Masterpass от Mastercard",Pay:"Оплатить",PayWith:"Оплатить с",PayWithCard:"Оплатить картой",Add:"Сохранить",EmailCaption:"Получить чек",PhoneCaption:"Ваш номер телефона",MTS:"МТС",Beeline:"Билайн",Megafon:"Мегафон",Tele2:"Теле2",Yota:"Yota",MTSTMobilStore:"Салоны связи МТС",QIWITerminals:"Терминалы QIWI",SetCardName:"Задайте имя карты",Change:"Изменить",Cancellation:"Отмена",RemoveCardQuestion:"Удалить карту?",DeleteAlert:"Вы действительно хотите удалить карту?",ErrorAlert:"Произошла ошибка",MPDeleteCardFootnote:"Карта и ее настройки автооплаты будут удалены и станут недоступны во всех сервисах, подключенных к Masterpass.",Remove:"Удалить",BuyByInstallments:"Купить в рассрочку",PaymentBySavedCard:"Оплата сохраненной картой",MPConditions:"Нажимая на кнопку «Оплатить», вы соглашаетесь с <a href='https://wallet.masterpass.ru/Terms.html' target='_blank'>условиями использования сервиса Masterpass</a>",PaytureOffer:"Нажимая на кнопку «Оплатить», вы соглашаетесь с <a href='https://payture.com/termsofuse' target='_blank'>условиями использования сервиса</a>",PaytureOfferAdd:"Нажимая на кнопку «Сохранить», вы соглашаетесь с <a href='https://payture.com/termsofuse' target='_blank'>условиями использования сервиса</a>",PaytureFootnote:"Оплата будет произведена с помощью процессингового центра Payture",ReturnDescription:"<br>Через несколько секунд вы&nbsp;будете перемещены на&nbsp;страницу магазина или&nbsp;нажмите <a href=''>сюда</a> чтобы перейти без ожидания",PaymentInProcessing:"Платеж в обработке...",NewCardName:"Новое имя карты",Password:"Пароль",MMYY:"MM/ГГ",M:"М",Y:"Г",NewCard:"Новая карта",Purchase:"Покупка",OrderNumber:"Заказ №",OnTheSite:" на сайте ",Rub:"₽",MPCardListLink:"Список карт",RETURN_TITLE_SUCCESS:"Payture",RETURN_TITLE_ERROR:"Payture",Cancel:"Отмена",PayWithHalva:"Оплата счетом ХАЛВА",SMSDelay:"Повторная отправка СМС через ",PaymentTypeSBPCaption:"Оплатить через СБП",PaymentTypeSberCaption:"Оплатить через SberPay",PaymentTypeTinkoffCaption:"Оплатить через Tinkoff Pay",SberPayPhoneFieldCaption:"Номер телефона, привязанный к СберБанк Онлайн",SberPaySubmitButton:"Получить пуш или СМС",ReturnShop:"Вернуться в магазин",LifeTimerCaption:"Осталось для оплаты",PluralDays:["день","дня","дней"]},EN:{ProviderDescription:"Payment gateway",MPPhoneFootnote:"To use a previously saved card or save a new one please enters your phone number",MPOtpFootnote:"Enter the SMS code or indicate the current phone number. A confirmed phone number will allow you to save cards or use previously saved cards",SendOnceAgain:"Send once again",ChoosePaymentMethod:"Choose a payment method",Card:"Card",MobileCommerce:"Mobile commerce",TerminalPay:"Payment terminals",SMSForConfirmation:"SMS for confirmation was sent to the specified mobile phone number",LinkedCards:"The linked cards",RemoveCard:"Remove the card",BankCardDetails:"Bank card details",CardNumber:"Card number",CardExpiryDate:"Card expiry date",VerificationCode:"Verification code",Cardholder:"Cardholder name",RememberCard:"Remember the card",MPAddCardFootnote:"Save the card so you no longer should enter the card number and expiration date manually. Cards are stored in conjunction with your phone number. Use your saved card wherever Mastercard by Mastercard is available.",Pay:"Pay",PayWith:"Pay with",PayWithCard:"Pay by card",Add:"Add",EmailCaption:"Your email (we will send the check)",PhoneCaption:"Your phone number",MTS:"MTS",Beeline:"Beeline",Megafon:"Megafon",Tele2:"Tele2",Yota:"Yota",MTSTMobilStore:"MTS T-Mobile store",QIWITerminals:"QIWI terminals",SetCardName:"Set a card name",Change:"Change",Cancellation:"Cancel",RemoveCardQuestion:"Should we remove the card?",DeleteAlert:"Should we remove the card?",ErrorAlert:"An error occurred",MPDeleteCardFootnote:"The card and its auto payment settings will be deleted and will become unavailable in all services connected to Masterpass.",Remove:"Remove",BuyByInstallments:"Buy by installments",PaymentBySavedCard:"Payment by saved card",MPConditions:"By clicking on the «Pay» button, you agree to the <a href='https://wallet.masterpass.ru/Terms.html' target='_blank'>Masterpass service terms of use</a>",PaytureOffer:'I accept&nbsp;<a target="_blank" href="https://payture.com/en/privacy"  style="font-size:10px;text-decoration:underline;">Privacy Policy</a> and&nbsp;<a target="_blank" href="https://payture.com/en/agreement"  style="font-size:10px;text-decoration:underline;">Consent to process personal data</a>',PaytureOfferAdd:'I accept&nbsp;<a target="_blank" href="https://payture.com/en/privacy"  style="font-size:10px;text-decoration:underline;">Privacy Policy</a> and&nbsp;<a target="_blank" href="https://payture.com/en/agreement"  style="font-size:10px;text-decoration:underline;">Consent to process personal data</a>',PaytureFootnote:"Payment will be made through the Payture payment gateway",ReturnDescription:"<br>You will be redirected to the merchant page in a few seconds or click <a href=''>here</a>",PaymentInProcessing:"Payment in processing...",NewCardName:"New card name",Password:"Password",MMYY:"MM/YY",M:"M",Y:"Y",NewCard:"New card",Purchase:"Purchase",OrderNumber:"Order №",OnTheSite:" on the website ",Rub:"₽",MPCardListLink:"List of cards",RETURN_TITLE_SUCCESS:"Payture",RETURN_TITLE_ERROR:"Payture",Cancel:"Cancel",PayWithHalva:"Pay with HALVA",SMSDelay:"Re-sending SMS in ",PaymentTypeSBPCaption:"Pay with SBP",PaymentTypeSberCaption:"Pay with SberPay",PaymentTypeTinkoffCaption:"Pay with Tinkoff Pay",SberPayPhoneFieldCaption:"Phone number",SberPaySubmitButton:"Recieve Push or SMS",ReturnShop:"Go back to the shop",LifeTimerCaption:"Time left for payment",PluralDays:["days","days","days"]},UA:{ProviderDescription:"Процессинговый центр",MPPhoneFootnote:"Введите ваш телефон, чтобы использовать ранее сохраненную карту или сохранить новую",MPOtpFootnote:"Введите код, отправленный в SMS, или укажите актуальный номер телефона. Подтвержденный номер телефона даст возможность сохранять карты или использовать ранее сохраненные карты",SendOnceAgain:"Отправить ещё раз",ChoosePaymentMethod:"Выберите метод оплаты",Card:"Карта",MobileCommerce:"Мобильная коммерция",TerminalPay:"Терминалы оплаты",SMSForConfirmation:"На указанный номер мобильного телефона выслано смс для подтверждения",LinkedCards:"Привязанные карты",RemoveCard:"Удалить карту",BankCardDetails:"Детали банковской карты",CardNumber:"Номер карты",CardExpiryDate:"Срок действия карты",VerificationCode:"Проверочный код",Cardholder:"Имя и Фамилия на карте",RememberCard:"Сохранить карту",MPAddCardFootnote:"Сохраните карту, чтобы больше не вводить номер и срок действия карты вручную. Карты сохраняются в связке с номером вашего телефона. Используйте сохраненную карту везде, где доступен Masterpass от Mastercard",Pay:"Заплатить",PayWith:"Оплатить с",PayWithCard:"Оплатить картой",Add:"Сохранить",EmailCaption:"Получить квитанцию",PhoneCaption:"Ваш номер телефона",MTS:"МТС",Beeline:"Билайн",Megafon:"Мегафон",Tele2:"Теле2",Yota:"Yota",MTSTMobilStore:"Салоны связи МТС",QIWITerminals:"Терминалы QIWI",SetCardName:"Задайте имя карты",Change:"Изменить",Cancellation:"Отмена",RemoveCardQuestion:"Удалить карту?",DeleteAlert:"Вы действительно хотите удалить карту?",ErrorAlert:"Произошла ошибка",MPDeleteCardFootnote:"Карта и ее настройки автооплаты будут удалены и станут недоступны во всех сервисах, подключенных к Masterpass.",Remove:"Удалить",BuyByInstallments:"Купить в рассрочку",PaymentBySavedCard:"Оплата сохраненной картой",MPConditions:"Нажимая на кнопку «Оплатить», вы соглашаетесь с <a href='https://wallet.masterpass.ru/Terms.html' target='_blank'>условиями использования сервиса Masterpass</a>",PaytureOffer:"Нажимая на кнопку «Оплатить», вы соглашаетесь с <a href='https://payture.com/termsofuse' target='_blank'>условиями использования сервиса</a>",PaytureOfferAdd:"Нажимая на кнопку «Сохранить», вы соглашаетесь с <a href='https://payture.com/termsofuse' target='_blank'>условиями использования сервиса</a>",PaytureFootnote:"Оплата будет произведена с помощью платёжного шлюза Payture ― №1 сертифицированный провайдер платежей согласно стандартам безопасности платёжных систем Visa и Mastercard.",ReturnDescription:"<br>Через несколько секунд вы&nbsp;будете перемещены на&nbsp;страницу магазина или&nbsp;нажмите <a href=''>сюда</a> чтобы перейти без ожидания",PaymentInProcessing:"Платеж в обработке...",NewCardName:"Новое имя карты",Password:"Пароль",MMYY:"MM/ГГ",M:"М",Y:"Г",NewCard:"Новая карта",Purchase:"Покупка",OrderNumber:"Заказ №",OnTheSite:" на сайте ",Rub:"₽",MPCardListLink:"Список карт",RETURN_TITLE_SUCCESS:"Payture",RETURN_TITLE_ERROR:"Payture",Cancel:"Отмена",PayWithHalva:"Оплата счетом ХАЛВА",SMSDelay:"Повторна відправка СМС через ",PaymentTypeSBPCaption:"Оплатить через СБП",PaymentTypeSberCaption:"Оплатить через SberPay",PaymentTypeTinkoffCaption:"Оплатить через Tinkoff Pay",SberPayPhoneFieldCaption:"Номер телефона, привязанный к СберБанк Онлайн",SberPaySubmitButton:"Получить пуш или СМС",ReturnShop:"Вернуться в магазин",LifeTimerCaption:"Осталось для оплаты",PluralDays:["день","дня","дней"]}},templateErrors={RU:{PanErrors:"В номере карты допущены ошибки",EmptyPan:"Введите от 16 до 19 знаков номера карты",EmptyDate:"Укажите срок действия карты",EmptyMonth:"Укажите месяц, до которого действительна карта",EmptyYear:"Укажите год, до которого действительна карта",WrongDate:"Неверно указана дата",WrongEmail:"Неверно указан E-mail",WrongPhone:"Неверно указан телефон",WrongFIO:"Неверно заполнено ФИО",EmptyCardHolder:"Укажите имя держателя карты",EmptyCVV:"Укажите проверочный код"},EN:{PanErrors:"Incorrect card number",EmptyPan:"Input from 16 to 19 digits of the card number",EmptyDate:"Select card expiration date",EmptyMonth:"Select card expiration month",EmptyYear:"Select card expiration year",WrongDate:"The date is wrong",WrongEmail:"The E-mail is wrong",WrongPhone:"The Phone is wrong",WrongFIO:"The FIO is wrong",EmptyCardHolder:"Select cardholder name",EmptyCVV:"Select CVV"},UA:{PanErrors:"В номере карты допущены ошибки",EmptyPan:"Введите от 16 до 19 знаков номера карты",EmptyDate:"Укажите срок действия карты",EmptyMonth:"Укажите месяц, до которого действительна карта",EmptyYear:"Укажите год, до которого действительна карта",WrongDate:"Неверно указана дата",WrongEmail:"Неверно указан E-mail",WrongPhone:"Неверно указан телефон",WrongFIO:"Неверно заполнено ФИО",EmptyCardHolder:"Укажите имя держателя карты",EmptyCVV:"Укажите проверочный код"}};Payture=function(e){return e.__internal__.model=function(e){var t=function(){return{PayMethod:"inpay",ApiPath:"/apim",VisibilitySettings:{AddCardElement:!1}}};return $ph.extend(e,{InPayInit:function(n){e.init(n);var o=Object.assign({},e.options);e.options=e.createOptions(o,t(),n)},inpay:function(){e.setOption("LoadingButtons.PayButton",!0),e.setOption("DisableSettings.PayButton",!0),$ph.ajax({url:"/apim/PaySubmit",data:$ph.getQuery({data:e.getFormValues(),Json:!0}),type:"POST",timeout:6e4,success:function(t){t.Success?e.onSuccess(t):(e.setNewKey(t.Key),e.onError(t))},error:function(t){e.onError(t)}})}})}(e.__internal__.model),e.__internal__.view=function(e){return $ph.extend(e,{InPayInit:function(){e.init(),e.setDefaultCardSettings()}})}(e.__internal__.view),$ph.extend(e,{InPay:function(e){this.__internal__.model.InPayInit(e),this.__internal__.view.InPayInit()}})}(Payture),Payture=function(e){return e.__internal__.model=function(e){var t=function(){return{PayMethod:"eWalletPay",ApiPath:"/vwapi",Interval:null,UsingFormValues:{CardId:!0,AddCard:!0},PreAuthFormValues:{CardId:!0},Elements:{EWalletDeleteCard:document.getElementById("removeCard"),EWalletCards:document.getElementsByName("CardId")[0]},VisibilitySettings:{EWalletDeleteCard:!1},Data:{AddCard:document.getElementsByName("AddCard")[0],CardId:document.getElementsByName("CardId")[0]},FormValues:{CardId:"",AddCard:null,ExternalWalletToken:null},ElementsToRedefine:{AddCard:{source:"Data",selectorType:"name",selector:"AddCard"}}}},n=function(t){var n=e.options,o=n.Elements.EWalletCards.options;n.Elements.EWalletCards.remove(t),o=n.Elements.EWalletCards.options,o.length<=1&&e.setOption("VisibilitySettings.SelectCardElement",!1),$ph.trigger(n.Data.CardId,"change")};return $ph.extend(e,{options:{},eWalletInit:function(n){e.init(n);var o=Object.assign({},e.options);this.options=e.createOptions(o,t(),n)},eWalletPay:function(){e.setOption("LoadingButtons.PayButton",!0),e.setOption("DisableSettings.PayButton",!0),$ph.ajax({url:"/vwapi/PaySubmit",data:$ph.getQuery({data:e.getFormValues(),Json:!0}),type:"POST",timeout:6e4,success:function(t){t.Success?e.onSuccess(t):(e.setNewKey(t.Key),e.onError(t))},error:function(t){e.onError(t)}})},eWalletAdd:function(){e.setOption("LoadingButtons.PayButton",!0),e.setOption("DisableSettings.PayButton",!0),$ph.ajax({url:"/vwapi/AddSubmit",data:$ph.getQuery({data:e.getFormValues(),Json:!0}),type:"POST",timeout:6e4,success:function(t){t.Success?e.onSuccess(t,!0):e.onError(t)},error:function(t){e.onError(t,!0)}})},eWalletDeleteCard:function(){var t=e.options,o=t.TemplateText[t.Language].ErrorAlert,a=t.FormValues.CardId,r=t.Elements.EWalletCards.options.selectedIndex;$ph.ajax({url:"/vwapi/RemoveBySession",data:$ph.getQuery({CardId:a,SessionId:t.QueryParams.SessionId,Json:!0}),type:"POST",timeout:6e4,success:function(e){-1!==e.indexOf('Success="True"')?n(r):alert(o)},error:function(){alert(o)}})}})}(e.__internal__.model),e.__internal__.view=function(t){var n=null,o=null,a=null,r=null,i=function(e){var t=$ph.extend({},o.UsingFormValues,{CardId:!0,AddCard:e,CardNumber:e,EMonth:e,EYear:e});n.setOption("UsingFormValues",t)},s=function(){$ph.addEvent("click",a.AddCard,function(){t.updateFormValueFromData("AddCard")}),$ph.addEvent("change",a.CardId,function(e){p(e,!0)}),$ph.addEvent("first-change",a.CardId,function(e){p(e,!1)}),$ph.addEvent("click",r.EWalletDeleteCard,function(e){var t=o.TemplateText[o.Language].DeleteAlert,a=o.Elements.EWalletCards.options.selectedIndex;e.preventDefault(),"FreePay"!==o.Elements.EWalletCards.options[a].value&&confirm(t)&&n.eWalletDeleteCard()})},l=function(e,t){return e?(t||"●").repeat(4)+" "+e.slice(-4):""},d=function(){document.getElementById("card-image-container")||document.getElementById("card-one").insertAdjacentHTML("beforeend",'<div id="card-image-container" class="card-image-container"><div class="card-image"><div class="brand-mark"></div><div class="pan-number"></div></div></div>')},u=function(e,t,o){if(e.target.options[e.target.selectedIndex].attributes["data-externalwallet"]){var a=!1;d(),n.setOption("UsingFormValues.ExternalWallet",!0),n.options.Interval&&clearInterval(n.options.Interval),""===e.target.options[e.target.selectedIndex].getAttribute("data-externalwallet")||"VisaToken"===e.target.options[e.target.selectedIndex].getAttribute("data-externalwallet")?(n.setOption("FormValues.ExternalWallet","VisaToken"),(e.target.options[e.target.selectedIndex].getAttribute("data-artfile")&&""!==e.target.options[e.target.selectedIndex].getAttribute("data-artfile")||e.target.options[e.target.selectedIndex].getAttribute("data-bgcolor")&&""!==e.target.options[e.target.selectedIndex].getAttribute("data-bgcolor"))&&(a=!0,m(e.target.options[e.target.selectedIndex]))):"MastercardToken"===e.target.options[e.target.selectedIndex].getAttribute("data-externalwallet")&&(n.setOption("FormValues.ExternalWallet","MastercardToken"),e.target.options[e.target.selectedIndex].getAttribute("data-cardbackgroundcombinedassetid")&&""!==e.target.options[e.target.selectedIndex].getAttribute("data-cardbackgroundcombinedassetid")&&(a=!0,c(e.target.options[e.target.selectedIndex]))),a?("true"===e.target.options[e.target.selectedIndex].getAttribute("securecode-required")?($ph.addClass(n.options.Elements.CardBlock,"only-cvv"),n.setOption("UsingFormValues.SecureCode",!0)):($ph.addClass(n.options.Elements.CardBlock,"hidden"),n.setOption("UsingFormValues.SecureCode",!1)),$ph.removeClass(n.options.Elements.CardBlock,"table"),$ph.removeClass(document.getElementById("card-image-container"),"hidden"),$ph.addClass(document.getElementById("card-image-container"),"block"),document.querySelector(".card-image .pan-number").innerHTML=l(t),document.querySelector(".card-image .pan-number").style.color=e.target.options[e.target.selectedIndex].getAttribute("data-fgcolor")):"true"===e.target.options[e.target.selectedIndex].getAttribute("securecode-required")?(n.setOption("VisibilitySettings.CVCField",!0),n.setOption("UsingFormValues.SecureCode",!0)):(n.setOption("VisibilitySettings.CVCField",!1),n.setOption("UsingFormValues.SecureCode",!1))}else n.options.UsingFormValues.SecureCode&&n.setOption("UsingFormValues.SecureCode",!0),n.options.VisibilitySettings.CVCField&&n.setOption("VisibilitySettings.CVCField",!0),$ph.removeClass(n.options.Elements.CardBlock,"only-cvv"),$ph.removeClass(n.options.Elements.CardBlock,"hidden"),$ph.addClass(n.options.Elements.CardBlock,"table"),n.setOption("UsingFormValues.ExternalWallet",!1),document.getElementById("card-image-container")&&($ph.removeClass(document.getElementById("card-image-container"),"block"),$ph.addClass(document.getElementById("card-image-container"),"hidden"))},c=function(e){function t(){return $ph.removeClass(n.options.Elements.CardBlock,"only-cvv"),$ph.addClass(n.options.Elements.CardBlock,"table"),document.getElementById("card-image-container")&&($ph.removeClass(document.getElementById("card-image-container"),"block"),$ph.addClass(document.getElementById("card-image-container"),"hidden")),n.options.Interval=setTimeout(function(){c()},2e3),!1}function o(){return document.querySelector(".card-image").style.width="100%",document.querySelector(".card-image").style.paddingTop=this.height/this.width*100+"%",document.querySelector(".card-image .brand-mark").style.display="none",document.querySelector(".card-image").style.background="url("+e.getAttribute("data-cardbackgroundcombinedassetid")+") no-repeat bottom right",document.querySelector(".card-image").style.backgroundSize="cover",!1}var a=document.createElement("img");if(!document.getElementById("vtsBgHolder")){var r=document.createElement("div");r.setAttribute("id","vtsBgHolder"),r.style.display="none",document.getElementsByTagName("body")[0].appendChild(r)}a.removeEventListener("error",t,!1),a.removeEventListener("load",o,!1),a.addEventListener("error",t,!1),a.addEventListener("load",o,!1);try{a.src=e.getAttribute("data-cardbackgroundcombinedassetid")}catch(e){}},m=function(e){function t(){return document.querySelector(".card-image").style.background=e.getAttribute("data-bgcolor"),$ph.removeClass(document.querySelector(".card-image .brand-mark"),"visa mir master mastercard amex dinersclub discover unionpay jcb maestro forbrugsforeningen dankort elo"),$ph.addClass(document.querySelector(".card-image .brand-mark"),"visa"),document.querySelector(".card-image .brand-mark").style.color=e.getAttribute("data-lbcolor"),document.querySelector(".card-image .brand-mark").style.display="block",n.options.Interval=setTimeout(function(){m()},2e3),!1}function o(){return document.querySelector(".card-image").style.width="100%",document.querySelector(".card-image").style.paddingTop=this.height/this.width*100+"%",document.querySelector(".card-image .brand-mark").style.display="none",document.querySelector(".card-image").style.background="url("+e.getAttribute("data-artfile")+") no-repeat bottom right",document.querySelector(".card-image").style.backgroundSize="cover",!1}var a=document.createElement("img");if(!document.getElementById("vtsBgHolder")){var r=document.createElement("div");r.setAttribute("id","vtsBgHolder"),r.style.display="none",document.getElementsByTagName("body")[0].appendChild(r)}a.removeEventListener("error",t,!1),a.removeEventListener("load",o,!1),a.addEventListener("error",t,!1),a.addEventListener("load",o,!1);try{a.src=e.getAttribute("data-artfile")}catch(e){}},p=function(e,o){var a=e.target.options[e.target.selectedIndex],r=a.innerText,s=!n.options.UsingFormValues.SecureCode,l=a.getAttribute("data-cardholder"),d=a.value,c="FreePay"===d;n.setOption("PageSettings.CardBackgroundColor",""),n.setOption("PageSettings.CardFontLabelColor",""),n.setOption("PageSettings.CardFontMainColor",""),n.setOption("PageSettings.CardLogo","none"),n.setOption("PageSettings.CardNumberPSIconVisibilityClass",!0),n.options.VisibilitySettings.CVCField&&n.setOption("VisibilitySettings.CVCField",!0),c?($ph.removeClass(n.options.Elements.CardBlock,"only-cvv"),$ph.removeClass(n.options.Elements.CardBlock,"hidden"),$ph.addClass(n.options.Elements.CardBlock,"table"),n.setOption("UsingFormValues.ExternalWallet",!1),document.getElementById("card-image-container")&&($ph.removeClass(document.getElementById("card-image-container"),"block"),$ph.addClass(document.getElementById("card-image-container"),"hidden")),"eWalletAdd"!==n.options.PayMethod&&(n.setOption("VisibilitySettings.AddCardElement",!0),n.setOption("VisibilitySettings.CardCheckboxesContainer",!0,"flex")),n.setOption("VisibilitySettings.EWalletDeleteCard",!1),n.setOption("CheckCardData",!0),t.setDefaultCardSettings(),n.options.Data.CardNumber.focus()):(n.setOption("VisibilitySettings.AddCardElement",!1),n.setOption("VisibilitySettings.EWalletDeleteCard",!0),n.setOption("CheckCardData",!1),t.setCardSettings(r,"XX/XX","",s,l),n.options.Data.SecureCode.focus(),t.checkAllErrors(),n.setOption("VisibilitySettings.CardCheckboxesContainer",n.options.VisibilitySettings.EMailVisibility,"flex"),u(e,r)),o&&t.removeAllErrors(),i(c),t.updateFormValueFromData("CardId"),t.checkButton()};return $ph.extend({},t,{eWalletInit:function(){t.init(),n=e.__internal__.model,o=n.options,a=o.Data,r=o.Elements,s(),window.onload=function(){o.Data.CardId&&$ph.trigger(o.Data.CardId,"first-change")}}})}(e.__internal__.view),$ph.extend(e,{eWalletPay:function(e){var t=$ph.extend({VisibilitySettings:{AddCardElement:!0,CardCheckboxesContainer:{key:!0,value:"flex"},SelectCardElement:document.getElementsByName("CardId")[0].options.length>1}},e);this.__internal__.model.eWalletInit(t),this.__internal__.view.eWalletInit()},eWalletAdd:function(e){var t=$ph.extend({PayMethod:"eWalletAdd",VisibilitySettings:{AddCardElement:!1,CardCheckboxesContainer:!1,SelectCardElement:!1,EMailVisibility:!1,CaptionPayMethodsBlock:!1,PayMethodsBlocks:!1},UsingFormValues:{CardId:!1,AddCard:!1}},e);this.__internal__.model.eWalletInit(t),this.__internal__.view.eWalletInit()}})}(Payture);